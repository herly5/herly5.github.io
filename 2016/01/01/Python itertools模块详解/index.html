
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Python itertools模块详解 | Bug&#39;小虫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="小虫">
    

    
    <meta name="description" content="这货很强大, 必须掌握 文档 链接 http://docs.python.org/2/library/itertools.html pymotw 链接 http://pymotw.com/2/itertools/ 基本是基于文档的翻译和补充，相当于翻译了 itertools用于高效循环的迭代函数集合 组成总体，整体了解 无限迭代器复制代码代码如下: 1234迭代器         参数">
<meta property="og:type" content="article">
<meta property="og:title" content="Python itertools模块详解">
<meta property="og:url" content="http://yoursite.com/2016/01/01/Python itertools模块详解/index.html">
<meta property="og:site_name" content="Bug&#39;小虫">
<meta property="og:description" content="这货很强大, 必须掌握 文档 链接 http://docs.python.org/2/library/itertools.html pymotw 链接 http://pymotw.com/2/itertools/ 基本是基于文档的翻译和补充，相当于翻译了 itertools用于高效循环的迭代函数集合 组成总体，整体了解 无限迭代器复制代码代码如下: 1234迭代器         参数">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-08-16T02:41:55.274Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python itertools模块详解">
<meta name="twitter:description" content="这货很强大, 必须掌握 文档 链接 http://docs.python.org/2/library/itertools.html pymotw 链接 http://pymotw.com/2/itertools/ 基本是基于文档的翻译和补充，相当于翻译了 itertools用于高效循环的迭代函数集合 组成总体，整体了解 无限迭代器复制代码代码如下: 1234迭代器         参数">

    
    <link rel="alternative" href="/atom.xml" title="Bug&#39;小虫" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Bug&#39;小虫">Bug&#39;小虫</a></h1>
				<h2 class="blog-motto">走过黑暗，前面便是光</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="[layout]" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/01/01/Python itertools模块详解/" title="Python itertools模块详解" itemprop="url">Python itertools模块详解</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2016-01-01T02:10:50.000Z" itemprop="datePublished"> 发表于 2016-01-01</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#组成"><span class="toc-number">1.</span> <span class="toc-text">组成</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第一部分"><span class="toc-number">2.</span> <span class="toc-text">第一部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-count-start-0-step-1"><span class="toc-number">2.1.</span> <span class="toc-text">itertools.count(start=0, step=1)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-repeat-object-times"><span class="toc-number">2.2.</span> <span class="toc-text">itertools.repeat(object[, times])</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第二部分"><span class="toc-number">3.</span> <span class="toc-text">第二部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-chain-iterables"><span class="toc-number">3.1.</span> <span class="toc-text">itertools.chain(*iterables)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-compress-data-selectors"><span class="toc-number">3.2.</span> <span class="toc-text">itertools.compress(data, selectors)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-dropwhile-predicate-iterable"><span class="toc-number">3.3.</span> <span class="toc-text">itertools.dropwhile(predicate, iterable)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-groupby-iterable-key"><span class="toc-number">3.4.</span> <span class="toc-text">itertools.groupby(iterable[, key])</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-ifilter-predicate-iterable"><span class="toc-number">3.5.</span> <span class="toc-text">itertools.ifilter(predicate, iterable)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-ifilterfalse-predicate-iterable"><span class="toc-number">3.6.</span> <span class="toc-text">itertools.ifilterfalse(predicate, iterable)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-islice-iterable-stop"><span class="toc-number">3.7.</span> <span class="toc-text">itertools.islice(iterable, stop)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-islice-iterable-start-stop-step"><span class="toc-number">3.8.</span> <span class="toc-text">itertools.islice(iterable, start, stop[, step])</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-imap-function-iterables"><span class="toc-number">3.9.</span> <span class="toc-text">itertools.imap(function, *iterables)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-starmap-function-iterable"><span class="toc-number">3.10.</span> <span class="toc-text">itertools.starmap(function, iterable)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-tee-iterable-n-2"><span class="toc-number">3.11.</span> <span class="toc-text">itertools.tee(iterable[, n=2])</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-takewhile-predicate-iterable"><span class="toc-number">3.12.</span> <span class="toc-text">itertools.takewhile(predicate, iterable)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-izip-iterables"><span class="toc-number">3.13.</span> <span class="toc-text">itertools.izip(*iterables)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-izip-longest-iterables-fillvalue"><span class="toc-number">3.14.</span> <span class="toc-text">itertools.izip_longest(*iterables[, fillvalue])</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第三部分"><span class="toc-number">4.</span> <span class="toc-text">第三部分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-product-iterables-repeat"><span class="toc-number">4.1.</span> <span class="toc-text">itertools.product(*iterables[, repeat])</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-permutations-iterable-r"><span class="toc-number">4.2.</span> <span class="toc-text">itertools.permutations(iterable[, r])</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-combinations-iterable-r"><span class="toc-number">4.3.</span> <span class="toc-text">itertools.combinations(iterable, r)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#itertools-combinations-with-replacement-iterable-r"><span class="toc-number">4.4.</span> <span class="toc-text">itertools.combinations_with_replacement(iterable, r)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第四部分"><span class="toc-number">5.</span> <span class="toc-text">第四部分</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#扩展"><span class="toc-number">6.</span> <span class="toc-text">扩展</span></a></li></ol>
		
		</div>
		
		<p>这货很强大, 必须掌握</p>
<p>文档 链接 <a href="http://docs.python.org/2/library/itertools.html" target="_blank" rel="noopener">http://docs.python.org/2/library/itertools.html</a></p>
<p>pymotw 链接 <a href="http://pymotw.com/2/itertools/" target="_blank" rel="noopener">http://pymotw.com/2/itertools/</a></p>
<p>基本是基于文档的翻译和补充，相当于翻译了</p>
<p>itertools用于高效循环的迭代函数集合</p>
<h1 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h1><p>总体，整体了解</p>
<p>无限迭代器<br>复制代码代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">迭代器         参数         结果                                                例子</span><br><span class="line">count()     start, [step]   start, start+step, start+2*step, ...                count(10) --&gt; 10 11 12 13 14 ...</span><br><span class="line">cycle()     p               p0, p1, ... plast, p0, p1, ...                      cycle(<span class="string">'ABCD'</span>) --&gt; A B C D A B C D ...</span><br><span class="line">repeat()    elem [,n]       elem, elem, elem, ... endlessly or up to n <span class="built_in">times</span>    repeat(10, 3) --&gt; 10 10 10</span><br></pre></td></tr></table></figure>
<p>　　<br>处理输入序列迭代器代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">迭代器          参数            结果                                        例子</span><br><span class="line">chain()     p, q, ...           p0, p1, ... plast, q0, q1, ...              chain(<span class="string">'ABC'</span>, <span class="string">'DEF'</span>) --&gt; A B C D E F</span><br><span class="line">compress()  data, selectors     (d[0] <span class="keyword">if</span> s[0]), (d[1] <span class="keyword">if</span> s[1]), ...         compress(<span class="string">'ABCDEF'</span>, [1,0,1,0,1,1]) --&gt; A C E F</span><br><span class="line">dropwhile() pred, seq           seq[n], seq[n+1], starting when pred fails  dropwhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 6 4 1</span><br><span class="line">groupby()   iterable[, keyfunc] sub-iterators grouped by value of keyfunc(v)</span><br><span class="line">ifilter()   pred, seq           elements of seq <span class="built_in">where</span> pred(elem) is True    ifilter(lambda x: x%2, range(10)) --&gt; 1 3 5 7 9</span><br><span class="line">ifilterfalse()  pred, seq       elements of seq <span class="built_in">where</span> pred(elem) is False   ifilterfalse(lambda x: x%2, range(10)) --&gt; 0 2 4 6 8</span><br><span class="line">islice()    seq, [start,] stop [, step] elements from seq[start:stop:step]  islice(<span class="string">'ABCDEFG'</span>, 2, None) --&gt; C D E F G</span><br><span class="line">imap()      func, p, q, ...     func(p0, q0), func(p1, q1), ...             imap(pow, (2,3,10), (5,2,3)) --&gt; 32 9 1000</span><br><span class="line">starmap()   func, seq           func(*seq[0]), func(*seq[1]), ...           starmap(pow, [(2,5), (3,2), (10,3)]) --&gt; 32 9 1000</span><br><span class="line">tee()       it, n               it1, it2 , ... itn splits one iterator into n</span><br><span class="line">takewhile() pred, seq           seq[0], seq[1], until pred fails            takewhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 1 4</span><br><span class="line">izip()      p, q, ...           (p[0], q[0]), (p[1], q[1]), ...             izip(<span class="string">'ABCD'</span>, <span class="string">'xy'</span>) --&gt; Ax By</span><br><span class="line">izip_longest()  p, q, ...       (p[0], q[0]), (p[1], q[1]), ...             izip_longest(<span class="string">'ABCD'</span>, <span class="string">'xy'</span>, fillvalue=<span class="string">'-'</span>) --&gt; Ax By C- D-</span><br></pre></td></tr></table></figure></p>
<p>组合生成器代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">迭代器          参数                        结果</span><br><span class="line">product()       p, q, ... [repeat=1]        cartesian product, equivalent to a nested <span class="keyword">for</span>-loop</span><br><span class="line">permutations()  p[, r]                      r-length tuples, all possible orderings, no repeated elements</span><br><span class="line">combinations()  p, r                        r-length tuples, <span class="keyword">in</span> sorted order, no repeated elements</span><br><span class="line">combinations_with_replacement() p, r        r-length tuples, <span class="keyword">in</span> sorted order, with repeated elements</span><br><span class="line">product(<span class="string">'ABCD'</span>, repeat=2)                   AA AB AC AD BA BB BC BD CA CB CC CD DA DB DC DD</span><br><span class="line">permutations(<span class="string">'ABCD'</span>, 2)                     AB AC AD BA BC BD CA CB CD DA DB DC</span><br><span class="line">combinations(<span class="string">'ABCD'</span>, 2)                     AB AC AD BC BD CD</span><br><span class="line">combinations_with_replacement(<span class="string">'ABCD'</span>, 2)    AA AB AC AD BB BC BD CC CD DD</span><br></pre></td></tr></table></figure>
<h1 id="第一部分"><a href="#第一部分" class="headerlink" title="第一部分"></a>第一部分</h1><h2 id="itertools-count-start-0-step-1"><a href="#itertools-count-start-0-step-1" class="headerlink" title="itertools.count(start=0, step=1)"></a>itertools.count(start=0, step=1)</h2><p>创建一个迭代器，生成从n开始的连续整数，如果忽略n，则从0开始计算（注意：此迭代器不支持长整数）</p>
<p>如果超出了sys.maxint，计数器将溢出并继续从-sys.maxint-1开始计算。</p>
<p>定义代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">def count(start=0, step=1):</span><br><span class="line">    <span class="comment"># count(10) --&gt; 10 11 12 13 14 ...</span></span><br><span class="line">    <span class="comment"># count(2.5, 0.5) -&gt; 2.5 3.0 3.5 ...</span></span><br><span class="line">    n = start</span><br><span class="line">    <span class="keyword">while</span> True:</span><br><span class="line">        yield n</span><br><span class="line">        n += step</span><br><span class="line"></span><br><span class="line">```　　</span><br><span class="line">等同于(start + step * i <span class="keyword">for</span> i <span class="keyword">in</span> count())</span><br><span class="line"></span><br><span class="line">使用代码如下:</span><br><span class="line">```bash	</span><br><span class="line"></span><br><span class="line">from itertools import *</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> izip(count(1), [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line">(1, <span class="string">'a'</span>)</span><br><span class="line">(2, <span class="string">'b'</span>)</span><br><span class="line">(3, <span class="string">'c'</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-repeat-object-times"><a href="#itertools-repeat-object-times" class="headerlink" title="itertools.repeat(object[, times])"></a>itertools.repeat(object[, times])</h2><p>创建一个迭代器，重复生成object，times（如果已提供）指定重复计数，如果未提供times，将无止尽返回该对象。</p>
<p>定义代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">def repeat(object, <span class="built_in">times</span>=None):</span><br><span class="line">    <span class="comment"># repeat(10, 3) --&gt; 10 10 10</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">times</span> is None:</span><br><span class="line">        <span class="keyword">while</span> True:</span><br><span class="line">            yield object</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="built_in">times</span>):</span><br><span class="line">            yield object</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> repeat(<span class="string">'over-and-over'</span>, 5):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line">over-and-over</span><br><span class="line">over-and-over</span><br><span class="line">over-and-over</span><br><span class="line">over-and-over</span><br><span class="line">over-and-over</span><br></pre></td></tr></table></figure></p>
<h1 id="第二部分"><a href="#第二部分" class="headerlink" title="第二部分"></a>第二部分</h1><h2 id="itertools-chain-iterables"><a href="#itertools-chain-iterables" class="headerlink" title="itertools.chain(*iterables)"></a>itertools.chain(*iterables)</h2><p>将多个迭代器作为参数, 但只返回单个迭代器, 它产生所有参数迭代器的内容, 就好像他们是来自于一个单一的序列.<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">def chain(*iterables):</span><br><span class="line">    <span class="comment"># chain('ABC', 'DEF') --&gt; A B C D E F</span></span><br><span class="line">    <span class="keyword">for</span> it <span class="keyword">in</span> iterables:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> it:</span><br><span class="line">            yield element</span><br><span class="line"></span><br><span class="line">```　　</span><br><span class="line">使用代码如下:</span><br><span class="line"></span><br><span class="line">```bash	</span><br><span class="line">from itertools import *</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> chain([1, 2, 3], [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">from itertools import chain, imap</span><br><span class="line">def flatmap(f, items):</span><br><span class="line">    <span class="built_in">return</span> chain.from_iterable(imap(f, items))</span><br><span class="line">&gt;&gt;&gt; list(flatmap(os.listdir, <span class="built_in">dirs</span>))</span><br><span class="line">&gt;&gt;&gt; [<span class="string">'settings.py'</span>, <span class="string">'wsgi.py'</span>, <span class="string">'templates'</span>, <span class="string">'app.py'</span>,</span><br><span class="line">     <span class="string">'templates'</span>, <span class="string">'index.html, '</span>config.json<span class="string">']</span></span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-compress-data-selectors"><a href="#itertools-compress-data-selectors" class="headerlink" title="itertools.compress(data, selectors)"></a>itertools.compress(data, selectors)</h2><p>提供一个选择列表，对原始数据进行筛选代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def compress(data, selectors):</span><br><span class="line">    <span class="comment"># compress('ABCDEF', [1,0,1,0,1,1]) --&gt; A C E F</span></span><br><span class="line">    <span class="built_in">return</span> (d <span class="keyword">for</span> d, s <span class="keyword">in</span> izip(data, selectors) <span class="keyword">if</span> s)</span><br></pre></td></tr></table></figure>
<h2 id="itertools-dropwhile-predicate-iterable"><a href="#itertools-dropwhile-predicate-iterable" class="headerlink" title="itertools.dropwhile(predicate, iterable)"></a>itertools.dropwhile(predicate, iterable)</h2><p>创建一个迭代器，只要函数predicate(item)为True，就丢弃iterable中的项，如果predicate返回False，就会生成iterable中的项和所有后续项。</p>
<p>即：在条件为false之后的第一次, 返回迭代器中剩下来的项.代码如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def dropwhile(predicate, iterable):</span><br><span class="line">    <span class="comment"># dropwhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 6 4 1</span></span><br><span class="line">    iterable = iter(iterable)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> not predicate(x):</span><br><span class="line">            yield x</span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        yield x</span><br></pre></td></tr></table></figure>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line">def should_drop(x):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Testing:'</span>, x</span><br><span class="line">    <span class="built_in">return</span> (x&lt;1)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dropwhile(should_drop, [ -1, 0, 1, 2, 3, 4, 1, -2 ]):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Yielding:'</span>, i</span><br><span class="line"> </span><br><span class="line">Testing: -1</span><br><span class="line">Testing: 0</span><br><span class="line">Testing: 1</span><br><span class="line">Yielding: 1</span><br><span class="line">Yielding: 2</span><br><span class="line">Yielding: 3</span><br><span class="line">Yielding: 4</span><br><span class="line">Yielding: 1</span><br><span class="line">Yielding: -2</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-groupby-iterable-key"><a href="#itertools-groupby-iterable-key" class="headerlink" title="itertools.groupby(iterable[, key])"></a>itertools.groupby(iterable[, key])</h2><p>返回一个产生按照key进行分组后的值集合的迭代器.</p>
<p>如果iterable在多次连续迭代中生成了同一项，则会定义一个组，如果将此函数应用一个分类列表，那么分组将定义该列表中的所有唯一项，key（如果已提供）是一个函数，应用于每一项，如果此函数存在返回值，该值将用于后续项而不是该项本身进行比较，此函数返回的迭代器生成元素(key, group)，其中key是分组的键值，group是迭代器，生成组成该组的所有项。</p>
<p>即：按照keyfunc函数对序列每个元素执行后的结果分组(每个分组是一个迭代器), 返回这些分组的迭代器<br>等价于代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class groupby(object):</span><br><span class="line">    <span class="comment"># [k for k, g in groupby('AAAABBBCCDAABBB')] --&gt; A B C D A B</span></span><br><span class="line">    <span class="comment"># [list(g) for k, g in groupby('AAAABBBCCD')] --&gt; AAAA BBB CC D</span></span><br><span class="line">    def __init__(self, iterable, key=None):</span><br><span class="line">        <span class="keyword">if</span> key is None:</span><br><span class="line">            key = lambda x: x</span><br><span class="line">        self.keyfunc = key</span><br><span class="line">        self.it = iter(iterable)</span><br><span class="line">        self.tgtkey = self.currkey = self.currvalue = object()</span><br><span class="line">    def __iter__(self):</span><br><span class="line">        <span class="built_in">return</span> self</span><br><span class="line">    def next(self):</span><br><span class="line">        <span class="keyword">while</span> self.currkey == self.tgtkey:</span><br><span class="line">            self.currvalue = next(self.it)    <span class="comment"># Exit on StopIteration</span></span><br><span class="line">            self.currkey = self.keyfunc(self.currvalue)</span><br><span class="line">        self.tgtkey = self.currkey</span><br><span class="line">        <span class="built_in">return</span> (self.currkey, self._grouper(self.tgtkey))</span><br><span class="line">    def _grouper(self, tgtkey):</span><br><span class="line">        <span class="keyword">while</span> self.currkey == tgtkey:</span><br><span class="line">            yield self.currvalue</span><br><span class="line">            self.currvalue = next(self.it)    <span class="comment"># Exit on StopIteration</span></span><br><span class="line">            self.currkey = self.keyfunc(self.currvalue)</span><br></pre></td></tr></table></figure></p>
<p>应用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from itertools import groupby</span><br><span class="line">qs = [&#123;<span class="string">'date'</span> : 1&#125;,&#123;<span class="string">'date'</span> : 2&#125;]</span><br><span class="line">[(name, list(group)) <span class="keyword">for</span> name, group <span class="keyword">in</span> itertools.groupby(qs, lambda p:p[<span class="string">'date'</span>])]</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">Out[77]: [(1, [&#123;<span class="string">'date'</span>: 1&#125;]), (2, [&#123;<span class="string">'date'</span>: 2&#125;])]</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; from itertools import *</span><br><span class="line">&gt;&gt;&gt; a = [<span class="string">'aa'</span>, <span class="string">'ab'</span>, <span class="string">'abc'</span>, <span class="string">'bcd'</span>, <span class="string">'abcde'</span>]</span><br><span class="line">&gt;&gt;&gt; <span class="keyword">for</span> i, k <span class="keyword">in</span> groupby(a, len):</span><br><span class="line">...     <span class="built_in">print</span> i, list(k)</span><br><span class="line">...</span><br><span class="line">2 [<span class="string">'aa'</span>, <span class="string">'ab'</span>]</span><br><span class="line">3 [<span class="string">'abc'</span>, <span class="string">'bcd'</span>]</span><br><span class="line">5 [<span class="string">'abcde'</span>]</span><br></pre></td></tr></table></figure></p>
<p>另一个例子代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">from operator import itemgetter</span><br><span class="line">  </span><br><span class="line">d = dict(a=1, b=2, c=1, d=2, e=1, f=2, g=3)</span><br><span class="line">di = sorted(d.iteritems(), key=itemgetter(1))</span><br><span class="line"><span class="keyword">for</span> k, g <span class="keyword">in</span> groupby(di, key=itemgetter(1)):</span><br><span class="line">    <span class="built_in">print</span> k, map(itemgetter(0), g)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">1 [<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>]</span><br><span class="line">2 [<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'f'</span>]</span><br><span class="line">3 [<span class="string">'g'</span>]</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-ifilter-predicate-iterable"><a href="#itertools-ifilter-predicate-iterable" class="headerlink" title="itertools.ifilter(predicate, iterable)"></a>itertools.ifilter(predicate, iterable)</h2><p>返回的是迭代器类似于针对列表的内置函数 filter() , 它只包括当测试函数返回true时的项. 它不同于 dropwhile()</p>
<p>创建一个迭代器，仅生成iterable中predicate(item)为True的项，如果predicate为None，将返回iterable中所有计算为True的项</p>
<p>对函数func执行返回真的元素的迭代器<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def ifilter(predicate, iterable):</span><br><span class="line">    <span class="comment"># ifilter(lambda x: x%2, range(10)) --&gt; 1 3 5 7 9</span></span><br><span class="line">    <span class="keyword">if</span> predicate is None:</span><br><span class="line">        predicate = bool</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> predicate(x):</span><br><span class="line">            yield x</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line">def check_item(x):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Testing:'</span>, x</span><br><span class="line">    <span class="built_in">return</span> (x&lt;1)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ifilter(check_item, [ -1, 0, 1, 2, 3, 4, 1, -2 ]):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Yielding:'</span>, i</span><br><span class="line"> </span><br><span class="line">Testing: -1</span><br><span class="line">Yielding: -1</span><br><span class="line">Testing: 0</span><br><span class="line">Yielding: 0</span><br><span class="line">Testing: 1</span><br><span class="line">Testing: 2</span><br><span class="line">Testing: 3</span><br><span class="line">Testing: 4</span><br><span class="line">Testing: 1</span><br><span class="line">Testing: -2</span><br><span class="line">Yielding: -2</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-ifilterfalse-predicate-iterable"><a href="#itertools-ifilterfalse-predicate-iterable" class="headerlink" title="itertools.ifilterfalse(predicate, iterable)"></a>itertools.ifilterfalse(predicate, iterable)</h2><p>和ifilter(函数相反 ， 返回一个包含那些测试函数返回false的项的迭代器)</p>
<p>创建一个迭代器，仅生成iterable中predicate(item)为False的项，如果predicate为None，则返回iterable中所有计算为False的项 对函数func执行返回假的元素的迭代器<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def ifilterfalse(predicate, iterable):</span><br><span class="line">    <span class="comment"># ifilterfalse(lambda x: x%2, range(10)) --&gt; 0 2 4 6 8</span></span><br><span class="line">    <span class="keyword">if</span> predicate is None:</span><br><span class="line">        predicate = bool</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> not predicate(x):</span><br><span class="line">            yield x</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">  </span><br><span class="line">def check_item(x):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Testing:'</span>, x</span><br><span class="line">    <span class="built_in">return</span> (x&lt;1)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ifilterfalse(check_item, [ -1, 0, 1, 2, 3, 4, 1, -2 ]):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Yielding:'</span>, i</span><br><span class="line"> </span><br><span class="line">Testing: -1</span><br><span class="line">Testing: 0</span><br><span class="line">Testing: 1</span><br><span class="line">Yielding: 1</span><br><span class="line">Testing: 2</span><br><span class="line">Yielding: 2</span><br><span class="line">Testing: 3</span><br><span class="line">Yielding: 3</span><br><span class="line">Testing: 4</span><br><span class="line">Yielding: 4</span><br><span class="line">Testing: 1</span><br><span class="line">Yielding: 1</span><br><span class="line">Testing: -2</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-islice-iterable-stop"><a href="#itertools-islice-iterable-stop" class="headerlink" title="itertools.islice(iterable, stop)"></a>itertools.islice(iterable, stop)</h2><h2 id="itertools-islice-iterable-start-stop-step"><a href="#itertools-islice-iterable-start-stop-step" class="headerlink" title="itertools.islice(iterable, start, stop[, step])"></a>itertools.islice(iterable, start, stop[, step])</h2><p>返回的迭代器是返回了输入迭代器根据索引来选取的项</p>
<p>创建一个迭代器，生成项的方式类似于切片返回值： iterable[start : stop : step]，将跳过前start个项，迭代在stop所指定的位置停止，step指定用于跳过项的步幅。 与切片不同，负值不会用于任何start，stop和step， 如果省略了start，迭代将从0开始，如果省略了step，步幅将采用1.</p>
<p>返回序列seq的从start开始到stop结束的步长为step的元素的迭代器代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def islice(iterable, *args):</span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2) --&gt; A B</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2, 4) --&gt; C D</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 2, None) --&gt; C D E F G</span></span><br><span class="line">    <span class="comment"># islice('ABCDEFG', 0, None, 2) --&gt; A C E G</span></span><br><span class="line">    s = slice(*args)</span><br><span class="line">    it = iter(xrange(s.start or 0, s.stop or sys.maxint, s.step or 1))</span><br><span class="line">    nexti = next(it)</span><br><span class="line">    <span class="keyword">for</span> i, element <span class="keyword">in</span> enumerate(iterable):</span><br><span class="line">        <span class="keyword">if</span> i == nexti:</span><br><span class="line">            yield element</span><br><span class="line">            nexti = next(it)</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">'Stop at 5:'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), 5):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">'Start at 5, Stop at 10:'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), 5, 10):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">'By tens to 100:'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(count(), 0, 100, 10):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line">Stop at 5:</span><br><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">Start at 5, Stop at 10:</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">By tens to 100:</span><br><span class="line">0</span><br><span class="line">10</span><br><span class="line">20</span><br><span class="line">30</span><br><span class="line">40</span><br><span class="line">50</span><br><span class="line">60</span><br><span class="line">70</span><br><span class="line">80</span><br><span class="line">90</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-imap-function-iterables"><a href="#itertools-imap-function-iterables" class="headerlink" title="itertools.imap(function, *iterables)"></a>itertools.imap(function, *iterables)</h2><p>创建一个迭代器，生成项function(i1, i2, …, iN)，其中i1，i2…iN分别来自迭代器iter1，iter2 … iterN，如果function为None，则返回(i1, i2, …, iN)形式的元组，只要提供的一个迭代器不再生成值，迭代就会停止。</p>
<p>即：返回一个迭代器, 它是调用了一个其值在输入迭代器上的函数, 返回结果. 它类似于内置函数 map() , 只是前者在任意输入迭代器结束后就停止(而不是插入None值来补全所有的输入).</p>
<p>返回序列每个元素被func执行后返回值的序列的迭代器代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def imap(<span class="keyword">function</span>, *iterables):</span><br><span class="line">    <span class="comment"># imap(pow, (2,3,10), (5,2,3)) --&gt; 32 9 1000</span></span><br><span class="line">    iterables = map(iter, iterables)</span><br><span class="line">    <span class="keyword">while</span> True:</span><br><span class="line">        args = [next(it) <span class="keyword">for</span> it <span class="keyword">in</span> iterables]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">function</span> is None:</span><br><span class="line">            yield tuple(args)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            yield <span class="keyword">function</span>(*args)</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line"><span class="built_in">print</span> <span class="string">'Doubles:'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> imap(lambda x:2*x, xrange(5)):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">'Multiples:'</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> imap(lambda x,y:(x, y, x*y), xrange(5), xrange(5,10)):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'%d * %d = %d'</span> % i</span><br><span class="line"> </span><br><span class="line">Doubles:</span><br><span class="line">0</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">6</span><br><span class="line">8</span><br><span class="line">Multiples:</span><br><span class="line">0 * 5 = 0</span><br><span class="line">1 * 6 = 6</span><br><span class="line">2 * 7 = 14</span><br><span class="line">3 * 8 = 24</span><br><span class="line">4 * 9 = 36</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-starmap-function-iterable"><a href="#itertools-starmap-function-iterable" class="headerlink" title="itertools.starmap(function, iterable)"></a>itertools.starmap(function, iterable)</h2><p>创建一个迭代器，生成值func(*item),其中item来自iterable，只有当iterable生成的项适用于这种调用函数的方式时，此函数才有效。</p>
<p>对序列seq的每个元素作为func的参数列表执行, 返回执行结果的迭代器<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def starmap(<span class="keyword">function</span>, iterable):</span><br><span class="line">    <span class="comment"># starmap(pow, [(2,5), (3,2), (10,3)]) --&gt; 32 9 1000</span></span><br><span class="line">    <span class="keyword">for</span> args <span class="keyword">in</span> iterable:</span><br><span class="line">        yield <span class="keyword">function</span>(*args)</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line">values = [(0, 5), (1, 6), (2, 7), (3, 8), (4, 9)]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> starmap(lambda x,y:(x, y, x*y), values):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'%d * %d = %d'</span> % i</span><br><span class="line"> </span><br><span class="line">0 * 5 = 0</span><br><span class="line">1 * 6 = 6</span><br><span class="line">2 * 7 = 14</span><br><span class="line">3 * 8 = 24</span><br><span class="line">4 * 9 = 36</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-tee-iterable-n-2"><a href="#itertools-tee-iterable-n-2" class="headerlink" title="itertools.tee(iterable[, n=2])"></a>itertools.tee(iterable[, n=2])</h2><p>返回一些基于单个原始输入的独立迭代器(默认为2). 它和Unix上的tee工具有点语义相似, 也就是说它们都重复读取输入设备中的值并将值写入到一个命名文件和标准输出中</p>
<p>从iterable创建n个独立的迭代器，创建的迭代器以n元组的形式返回，n的默认值为2，此函数适用于任何可迭代的对象，但是，为了克隆原始迭代器，生成的项会被缓存，并在所有新创建的迭代器中使用，一定要注意，不要在调用tee()之后使用原始迭代器iterable，否则缓存机制可能无法正确工作。</p>
<p>把一个迭代器分为n个迭代器, 返回一个元组.默认是两个代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def tee(iterable, n=2):</span><br><span class="line">    it = iter(iterable)</span><br><span class="line">    deques = [collections.deque() <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">    def gen(mydeque):</span><br><span class="line">        <span class="keyword">while</span> True:</span><br><span class="line">            <span class="keyword">if</span> not mydeque:             <span class="comment"># when the local deque is empty</span></span><br><span class="line">                newval = next(it)       <span class="comment"># fetch a new value and</span></span><br><span class="line">                <span class="keyword">for</span> d <span class="keyword">in</span> deques:        <span class="comment"># load it to all the deques</span></span><br><span class="line">                    d.append(newval)</span><br><span class="line">            yield mydeque.popleft()</span><br><span class="line">    <span class="built_in">return</span> tuple(gen(d) <span class="keyword">for</span> d <span class="keyword">in</span> deques)</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line">r = islice(count(), 5)</span><br><span class="line">i1, i2 = tee(r)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> i1:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'i1:'</span>, i</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> i2:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'i2:'</span>, i</span><br><span class="line"> </span><br><span class="line">i1: 0</span><br><span class="line">i1: 1</span><br><span class="line">i1: 2</span><br><span class="line">i1: 3</span><br><span class="line">i1: 4</span><br><span class="line">i2: 0</span><br><span class="line">i2: 1</span><br><span class="line">i2: 2</span><br><span class="line">i2: 3</span><br><span class="line">i2: 4</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-takewhile-predicate-iterable"><a href="#itertools-takewhile-predicate-iterable" class="headerlink" title="itertools.takewhile(predicate, iterable)"></a>itertools.takewhile(predicate, iterable)</h2><p>和dropwhile相反</p>
<p>创建一个迭代器，生成iterable中predicate(item)为True的项，只要predicate计算为False，迭代就会立即停止。</p>
<p>即：从序列的头开始, 直到执行函数func失败.<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def takewhile(predicate, iterable):</span><br><span class="line">    <span class="comment"># takewhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 1 4</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> iterable:</span><br><span class="line">        <span class="keyword">if</span> predicate(x):</span><br><span class="line">            yield x</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">break</span></span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">   </span><br><span class="line">def should_take(x):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Testing:'</span>, x</span><br><span class="line">    <span class="built_in">return</span> (x&lt;2)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> takewhile(should_take, [ -1, 0, 1, 2, 3, 4, 1, -2 ]):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">'Yielding:'</span>, i</span><br><span class="line"> </span><br><span class="line">Testing: -1</span><br><span class="line">Yielding: -1</span><br><span class="line">Testing: 0</span><br><span class="line">Yielding: 0</span><br><span class="line">Testing: 1</span><br><span class="line">Yielding: 1</span><br><span class="line">Testing: 2</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-izip-iterables"><a href="#itertools-izip-iterables" class="headerlink" title="itertools.izip(*iterables)"></a>itertools.izip(*iterables)</h2><p>返回一个合并了多个迭代器为一个元组的迭代器. 它类似于内置函数zip(), 只是它返回的是一个迭代器而不是一个列表</p>
<p>创建一个迭代器，生成元组(i1, i2, … iN)，其中i1，i2 … iN 分别来自迭代器iter1，iter2 … iterN，只要提供的某个迭代器不再生成值，迭代就会停止，此函数生成的值与内置的zip()函数相同。代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">izip(iter1, iter2, ... iterN):</span><br><span class="line">返回:(it1[0],it2 [0], it3[0], ..), (it1[1], it2[1], it3[1], ..)...</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">def izip(*iterables):</span><br><span class="line">    <span class="comment"># izip('ABCD', 'xy') --&gt; Ax By</span></span><br><span class="line">    iterators = map(iter, iterables)</span><br><span class="line">    <span class="keyword">while</span> iterators:</span><br><span class="line">        yield tuple(map(next, iterators))</span><br></pre></td></tr></table></figure></p>
<p>使用代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from itertools import *</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> izip([1, 2, 3], [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]):</span><br><span class="line">    <span class="built_in">print</span> i</span><br><span class="line">(1, <span class="string">'a'</span>)</span><br><span class="line">(2, <span class="string">'b'</span>)</span><br><span class="line">(3, <span class="string">'c'</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-izip-longest-iterables-fillvalue"><a href="#itertools-izip-longest-iterables-fillvalue" class="headerlink" title="itertools.izip_longest(*iterables[, fillvalue])"></a>itertools.izip_longest(*iterables[, fillvalue])</h2><p>与izip()相同，但是迭代过程会持续到所有输入迭代变量iter1,iter2等都耗尽为止，如果没有使用fillvalue关键字参数指定不同的值，则使用None来填充已经使用的迭代变量的值。<br>代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class ZipExhausted(Exception):</span><br><span class="line">    pass</span><br><span class="line">   </span><br><span class="line">def izip_longest(*args, **kwds):</span><br><span class="line">    <span class="comment"># izip_longest('ABCD', 'xy', fillvalue='-') --&gt; Ax By C- D-</span></span><br><span class="line">    fillvalue = kwds.get(<span class="string">'fillvalue'</span>)</span><br><span class="line">    counter = [len(args) - 1]</span><br><span class="line">    def sentinel():</span><br><span class="line">        <span class="keyword">if</span> not counter[0]:</span><br><span class="line">            raise ZipExhausted</span><br><span class="line">        counter[0] -= 1</span><br><span class="line">        yield fillvalue</span><br><span class="line">    fillers = repeat(fillvalue)</span><br><span class="line">    iterators = [chain(it, sentinel(), fillers) <span class="keyword">for</span> it <span class="keyword">in</span> args]</span><br><span class="line">    try:</span><br><span class="line">        <span class="keyword">while</span> iterators:</span><br><span class="line">            yield tuple(map(next, iterators))</span><br><span class="line">    except ZipExhausted:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure></p>
<h1 id="第三部分"><a href="#第三部分" class="headerlink" title="第三部分"></a>第三部分</h1><h2 id="itertools-product-iterables-repeat"><a href="#itertools-product-iterables-repeat" class="headerlink" title="itertools.product(*iterables[, repeat])"></a>itertools.product(*iterables[, repeat])</h2><p>笛卡尔积</p>
<p>创建一个迭代器，生成表示item1，item2等中的项目的笛卡尔积的元组，repeat是一个关键字参数，指定重复生成序列的次数。代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">def product(*args, **kwds):</span><br><span class="line">    <span class="comment"># product('ABCD', 'xy') --&gt; Ax Ay Bx By Cx Cy Dx Dy</span></span><br><span class="line">    <span class="comment"># product(range(2), repeat=3) --&gt; 000 001 010 011 100 101 110 111</span></span><br><span class="line">    pools = map(tuple, args) * kwds.get(<span class="string">'repeat'</span>, 1)</span><br><span class="line">    result = [[]]</span><br><span class="line">    <span class="keyword">for</span> pool <span class="keyword">in</span> pools:</span><br><span class="line">        result = [x+[y] <span class="keyword">for</span> x <span class="keyword">in</span> result <span class="keyword">for</span> y <span class="keyword">in</span> pool]</span><br><span class="line">    <span class="keyword">for</span> prod <span class="keyword">in</span> result:</span><br><span class="line">        yield tuple(prod)</span><br><span class="line"></span><br><span class="line">例子代码如下:</span><br><span class="line">```bash	</span><br><span class="line">import itertools</span><br><span class="line">a = (1, 2, 3)</span><br><span class="line">b = (<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>)</span><br><span class="line">c = itertools.product(a,b)</span><br><span class="line"><span class="keyword">for</span> elem <span class="keyword">in</span> c:</span><br><span class="line">    <span class="built_in">print</span> elem</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">(1, <span class="string">'A'</span>)</span><br><span class="line">(1, <span class="string">'B'</span>)</span><br><span class="line">(1, <span class="string">'C'</span>)</span><br><span class="line">(2, <span class="string">'A'</span>)</span><br><span class="line">(2, <span class="string">'B'</span>)</span><br><span class="line">(2, <span class="string">'C'</span>)</span><br><span class="line">(3, <span class="string">'A'</span>)</span><br><span class="line">(3, <span class="string">'B'</span>)</span><br><span class="line">(3, <span class="string">'C'</span>)</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-permutations-iterable-r"><a href="#itertools-permutations-iterable-r" class="headerlink" title="itertools.permutations(iterable[, r])"></a>itertools.permutations(iterable[, r])</h2><p>排列</p>
<p>创建一个迭代器，返回iterable中所有长度为r的项目序列，如果省略了r，那么序列的长度与iterable中的项目数量相同： 返回p中任意取r个元素做排列的元组的迭代器<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">def permutations(iterable, r=None):</span><br><span class="line">    <span class="comment"># permutations('ABCD', 2) --&gt; AB AC AD BA BC BD CA CB CD DA DB DC</span></span><br><span class="line">    <span class="comment"># permutations(range(3)) --&gt; 012 021 102 120 201 210</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    r = n <span class="keyword">if</span> r is None <span class="keyword">else</span> r</span><br><span class="line">    <span class="keyword">if</span> r &gt; n:</span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    indices = range(n)</span><br><span class="line">    cycles = range(n, n-r, -1)</span><br><span class="line">    yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices[:r])</span><br><span class="line">    <span class="keyword">while</span> n:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            cycles[i] -= 1</span><br><span class="line">            <span class="keyword">if</span> cycles[i] == 0:</span><br><span class="line">                indices[i:] = indices[i+1:] + indices[i:i+1]</span><br><span class="line">                cycles[i] = n - i</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                j = cycles[i]</span><br><span class="line">                indices[i], indices[-j] = indices[-j], indices[i]</span><br><span class="line">                yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices[:r])</span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">return</span></span><br><span class="line">也可以用product实现</span><br><span class="line">  </span><br><span class="line">def permutations(iterable, r=None):</span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    r = n <span class="keyword">if</span> r is None <span class="keyword">else</span> r</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> product(range(n), repeat=r):</span><br><span class="line">        <span class="keyword">if</span> len(<span class="built_in">set</span>(indices)) == r:</span><br><span class="line">            yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-combinations-iterable-r"><a href="#itertools-combinations-iterable-r" class="headerlink" title="itertools.combinations(iterable, r)"></a>itertools.combinations(iterable, r)</h2><p>创建一个迭代器，返回iterable中所有长度为r的子序列，返回的子序列中的项按输入iterable中的顺序排序 (不带重复)代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def combinations(iterable, r):</span><br><span class="line">    <span class="comment"># combinations('ABCD', 2) --&gt; AB AC AD BC BD CD</span></span><br><span class="line">    <span class="comment"># combinations(range(4), 3) --&gt; 012 013 023 123</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">if</span> r &gt; n:</span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    indices = range(r)</span><br><span class="line">    yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line">    <span class="keyword">while</span> True:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            <span class="keyword">if</span> indices[i] != i + n - r:</span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">return</span></span><br><span class="line">        indices[i] += 1</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i+1, r):</span><br><span class="line">            indices[j] = indices[j-1] + 1</span><br><span class="line">        yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def combinations(iterable, r):</span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> permutations(range(n), r):</span><br><span class="line">        <span class="keyword">if</span> sorted(indices) == list(indices):</span><br><span class="line">            yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure></p>
<h2 id="itertools-combinations-with-replacement-iterable-r"><a href="#itertools-combinations-with-replacement-iterable-r" class="headerlink" title="itertools.combinations_with_replacement(iterable, r)"></a>itertools.combinations_with_replacement(iterable, r)</h2><p>创建一个迭代器，返回iterable中所有长度为r的子序列，返回的子序列中的项按输入iterable中的顺序排序 (带重复)代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">def combinations_with_replacement(iterable, r):</span><br><span class="line">    <span class="comment"># combinations_with_replacement('ABC', 2) --&gt; AA AB AC BB BC CC</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">if</span> not n and r:</span><br><span class="line">        <span class="built_in">return</span></span><br><span class="line">    indices = [0] * r</span><br><span class="line">    yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line">    <span class="keyword">while</span> True:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(r)):</span><br><span class="line">            <span class="keyword">if</span> indices[i] != n - 1:</span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">return</span></span><br><span class="line">        indices[i:] = [indices[i] + 1] * (r - i)</span><br><span class="line">        yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure></p>
<p>　　<br>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def combinations_with_replacement(iterable, r):</span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    <span class="keyword">for</span> indices <span class="keyword">in</span> product(range(n), repeat=r):</span><br><span class="line">        <span class="keyword">if</span> sorted(indices) == list(indices):</span><br><span class="line">            yield tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br></pre></td></tr></table></figure></p>
<h1 id="第四部分"><a href="#第四部分" class="headerlink" title="第四部分"></a>第四部分</h1><h1 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h1><p>使用现有扩展功能<br>复制代码代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">def take(n, iterable):</span><br><span class="line">    <span class="string">"Return first n items of the iterable as a list"</span></span><br><span class="line">    <span class="built_in">return</span> list(islice(iterable, n))</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">def tabulate(<span class="keyword">function</span>, start=0):</span><br><span class="line">    <span class="string">"Return function(0), function(1), ..."</span></span><br><span class="line">    <span class="built_in">return</span> imap(<span class="keyword">function</span>, count(start))</span><br><span class="line"> </span><br><span class="line">def consume(iterator, n):</span><br><span class="line">    <span class="string">"Advance the iterator n-steps ahead. If n is none, consume entirely."</span></span><br><span class="line">    <span class="comment"># Use functions that consume iterators at C speed.</span></span><br><span class="line">    <span class="keyword">if</span> n is None:</span><br><span class="line">        <span class="comment"># feed the entire iterator into a zero-length deque</span></span><br><span class="line">        collections.deque(iterator, maxlen=0)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># advance to the empty slice starting at position n</span></span><br><span class="line">        next(islice(iterator, n, n), None)</span><br><span class="line"> </span><br><span class="line">def nth(iterable, n, default=None):</span><br><span class="line">    <span class="string">"Returns the nth item or a default value"</span></span><br><span class="line">    <span class="built_in">return</span> next(islice(iterable, n, None), default)</span><br><span class="line"> </span><br><span class="line">def quantify(iterable, pred=bool):</span><br><span class="line">    <span class="string">"Count how many times the predicate is true"</span></span><br><span class="line">    <span class="built_in">return</span> sum(imap(pred, iterable))</span><br><span class="line"> </span><br><span class="line">def padnone(iterable):</span><br><span class="line">    <span class="string">""</span><span class="string">"Returns the sequence elements and then returns None indefinitely.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Useful for emulating the behavior of the built-in map() function.</span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    <span class="built_in">return</span> chain(iterable, repeat(None))</span><br><span class="line"> </span><br><span class="line">def ncycles(iterable, n):</span><br><span class="line">    <span class="string">"Returns the sequence elements n times"</span></span><br><span class="line">    <span class="built_in">return</span> chain.from_iterable(repeat(tuple(iterable), n))</span><br><span class="line"> </span><br><span class="line">def dotproduct(vec1, vec2):</span><br><span class="line">    <span class="built_in">return</span> sum(imap(operator.mul, vec1, vec2))</span><br><span class="line"> </span><br><span class="line">def flatten(listOfLists):</span><br><span class="line">    <span class="string">"Flatten one level of nesting"</span></span><br><span class="line">    <span class="built_in">return</span> chain.from_iterable(listOfLists)</span><br><span class="line"> </span><br><span class="line">def repeatfunc(func, <span class="built_in">times</span>=None, *args):</span><br><span class="line">    <span class="string">""</span><span class="string">"Repeat calls to func with specified arguments.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Example:  repeatfunc(random.random)</span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">times</span> is None:</span><br><span class="line">        <span class="built_in">return</span> starmap(func, repeat(args))</span><br><span class="line">    <span class="built_in">return</span> starmap(func, repeat(args, <span class="built_in">times</span>))</span><br><span class="line"> </span><br><span class="line">def pairwise(iterable):</span><br><span class="line">    <span class="string">"s -&gt; (s0,s1), (s1,s2), (s2, s3), ..."</span></span><br><span class="line">    a, b = tee(iterable)</span><br><span class="line">    next(b, None)</span><br><span class="line">    <span class="built_in">return</span> izip(a, b)</span><br><span class="line"> </span><br><span class="line">def grouper(iterable, n, fillvalue=None):</span><br><span class="line">    <span class="string">"Collect data into fixed-length chunks or blocks"</span></span><br><span class="line">    <span class="comment"># grouper('ABCDEFG', 3, 'x') --&gt; ABC DEF Gxx</span></span><br><span class="line">    args = [iter(iterable)] * n</span><br><span class="line">    <span class="built_in">return</span> izip_longest(fillvalue=fillvalue, *args)</span><br><span class="line"> </span><br><span class="line">def roundrobin(*iterables):</span><br><span class="line">    <span class="string">"roundrobin('ABC', 'D', 'EF') --&gt; A D E B F C"</span></span><br><span class="line">    <span class="comment"># Recipe credited to George Sakkis</span></span><br><span class="line">    pending = len(iterables)</span><br><span class="line">    nexts = cycle(iter(it).next <span class="keyword">for</span> it <span class="keyword">in</span> iterables)</span><br><span class="line">    <span class="keyword">while</span> pending:</span><br><span class="line">        try:</span><br><span class="line">            <span class="keyword">for</span> next <span class="keyword">in</span> nexts:</span><br><span class="line">                yield next()</span><br><span class="line">        except StopIteration:</span><br><span class="line">            pending -= 1</span><br><span class="line">            nexts = cycle(islice(nexts, pending))</span><br><span class="line"> </span><br><span class="line">def powerset(iterable):</span><br><span class="line">    <span class="string">"powerset([1,2,3]) --&gt; () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)"</span></span><br><span class="line">    s = list(iterable)</span><br><span class="line">    <span class="built_in">return</span> chain.from_iterable(combinations(s, r) <span class="keyword">for</span> r <span class="keyword">in</span> range(len(s)+1))</span><br><span class="line"> </span><br><span class="line">def unique_everseen(iterable, key=None):</span><br><span class="line">    <span class="string">"List unique elements, preserving order. Remember all elements ever seen."</span></span><br><span class="line">    <span class="comment"># unique_everseen('AAAABBBCCDAABBB') --&gt; A B C D</span></span><br><span class="line">    <span class="comment"># unique_everseen('ABBCcAD', str.lower) --&gt; A B C D</span></span><br><span class="line">    seen = <span class="built_in">set</span>()</span><br><span class="line">    seen_add = seen.add</span><br><span class="line">    <span class="keyword">if</span> key is None:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> ifilterfalse(seen.__contains__, iterable):</span><br><span class="line">            seen_add(element)</span><br><span class="line">            yield element</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> iterable:</span><br><span class="line">            k = key(element)</span><br><span class="line">            <span class="keyword">if</span> k not <span class="keyword">in</span> seen:</span><br><span class="line">                seen_add(k)</span><br><span class="line">                yield element</span><br><span class="line"> </span><br><span class="line">def unique_justseen(iterable, key=None):</span><br><span class="line">    <span class="string">"List unique elements, preserving order. Remember only the element just seen."</span></span><br><span class="line">    <span class="comment"># unique_justseen('AAAABBBCCDAABBB') --&gt; A B C D A B</span></span><br><span class="line">    <span class="comment"># unique_justseen('ABBCcAD', str.lower) --&gt; A B C A D</span></span><br><span class="line">    <span class="built_in">return</span> imap(next, imap(itemgetter(1), groupby(iterable, key)))</span><br><span class="line"> </span><br><span class="line">def iter_except(func, exception, first=None):</span><br><span class="line">    <span class="string">""</span><span class="string">" Call a function repeatedly until an exception is raised.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Converts a call-until-exception interface to an iterator interface.</span></span><br><span class="line"><span class="string">    Like __builtin__.iter(func, sentinel) but uses an exception instead</span></span><br><span class="line"><span class="string">    of a sentinel to end the loop.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Examples:</span></span><br><span class="line"><span class="string">        bsddbiter = iter_except(db.next, bsddb.error, db.first)</span></span><br><span class="line"><span class="string">        heapiter = iter_except(functools.partial(heappop, h), IndexError)</span></span><br><span class="line"><span class="string">        dictiter = iter_except(d.popitem, KeyError)</span></span><br><span class="line"><span class="string">        dequeiter = iter_except(d.popleft, IndexError)</span></span><br><span class="line"><span class="string">        queueiter = iter_except(q.get_nowait, Queue.Empty)</span></span><br><span class="line"><span class="string">        setiter = iter_except(s.pop, KeyError)</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    try:</span><br><span class="line">        <span class="keyword">if</span> first is not None:</span><br><span class="line">            yield first()</span><br><span class="line">        <span class="keyword">while</span> 1:</span><br><span class="line">            yield func()</span><br><span class="line">    except exception:</span><br><span class="line">        pass</span><br><span class="line"> </span><br><span class="line">def random_product(*args, **kwds):</span><br><span class="line">    <span class="string">"Random selection from itertools.product(*args, **kwds)"</span></span><br><span class="line">    pools = map(tuple, args) * kwds.get(<span class="string">'repeat'</span>, 1)</span><br><span class="line">    <span class="built_in">return</span> tuple(random.choice(pool) <span class="keyword">for</span> pool <span class="keyword">in</span> pools)</span><br><span class="line"> </span><br><span class="line">def random_permutation(iterable, r=None):</span><br><span class="line">    <span class="string">"Random selection from itertools.permutations(iterable, r)"</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    r = len(pool) <span class="keyword">if</span> r is None <span class="keyword">else</span> r</span><br><span class="line">    <span class="built_in">return</span> tuple(random.sample(pool, r))</span><br><span class="line"> </span><br><span class="line">def random_combination(iterable, r):</span><br><span class="line">    <span class="string">"Random selection from itertools.combinations(iterable, r)"</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    indices = sorted(random.sample(xrange(n), r))</span><br><span class="line">    <span class="built_in">return</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line"> </span><br><span class="line">def random_combination_with_replacement(iterable, r):</span><br><span class="line">    <span class="string">"Random selection from itertools.combinations_with_replacement(iterable, r)"</span></span><br><span class="line">    pool = tuple(iterable)</span><br><span class="line">    n = len(pool)</span><br><span class="line">    indices = sorted(random.randrange(n) <span class="keyword">for</span> i <span class="keyword">in</span> xrange(r))</span><br><span class="line">    <span class="built_in">return</span> tuple(pool[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices)</span><br><span class="line"> </span><br><span class="line">def tee_lookahead(t, i):</span><br><span class="line">    <span class="string">""</span><span class="string">"Inspect the i-th upcomping value from a tee object</span></span><br><span class="line"><span class="string">    while leaving the tee object at its current position.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    Raise an IndexError if the underlying iterator doesn't</span></span><br><span class="line"><span class="string">    have enough values.</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> value <span class="keyword">in</span> islice(t.__copy__(), i, None):</span><br><span class="line">        <span class="built_in">return</span> value</span><br><span class="line">    raise IndexError(i)</span><br></pre></td></tr></table></figure></p>
<p>自定义扩展</p>
<p>将序列按大小切分,更好的性能代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from itertools import chain, islice</span><br><span class="line">def chunks(iterable, size, format=iter):</span><br><span class="line">    it = iter(iterable)</span><br><span class="line">    while True:</span><br><span class="line">        yield format(chain((it.next(),), islice(it, size - 1)))</span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; l = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;]</span><br><span class="line">&gt;&gt;&gt; for chunk in chunks(l, 3, tuple):...</span><br><span class="line">        print chunk...</span><br><span class="line">(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</span><br><span class="line">(&quot;d&quot;, &quot;e&quot;, &quot;f&quot;)</span><br><span class="line">(&quot;g&quot;,)</span><br></pre></td></tr></table></figure></p>
<p>补充</p>
<p>迭代工具，你最好的朋友</p>
<p>迭代工具模块包含了操做指定的函数用于操作迭代器。想复制一个迭代器出来？链接两个迭代器？以one liner（这里的one-liner只需一行代码能搞定的任务)用内嵌的列表组合一组值？不使用list创建Map/Zip？···，你要做的就是 import itertools，举个例子吧：</p>
<p>四匹马赛跑到达终点排名的所有可能性：代码如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; horses = [1, 2, 3, 4]</span><br><span class="line">&gt;&gt;&gt; races = itertools.permutations(horses)</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(races)</span><br><span class="line">&lt;itertools.permutations object at 0xb754f1dc]]&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(list(itertools.permutations(horses)))</span><br><span class="line">[(1, 2, 3, 4),</span><br><span class="line"> (1, 2, 4, 3),</span><br><span class="line"> (1, 3, 2, 4),</span><br><span class="line"> (1, 3, 4, 2),</span><br><span class="line"> (1, 4, 2, 3),</span><br><span class="line"> (1, 4, 3, 2),</span><br><span class="line"> (2, 1, 3, 4),</span><br><span class="line"> (2, 1, 4, 3),</span><br><span class="line"> (2, 3, 1, 4),</span><br><span class="line"> (2, 3, 4, 1),</span><br><span class="line"> (2, 4, 1, 3),</span><br><span class="line"> (2, 4, 3, 1),</span><br><span class="line"> (3, 1, 2, 4),</span><br><span class="line"> (3, 1, 4, 2),</span><br><span class="line"> (3, 2, 1, 4),</span><br><span class="line"> (3, 2, 4, 1),</span><br><span class="line"> (3, 4, 1, 2),</span><br><span class="line"> (3, 4, 2, 1),</span><br><span class="line"> (4, 1, 2, 3),</span><br><span class="line"> (4, 1, 3, 2),</span><br><span class="line"> (4, 2, 1, 3),</span><br><span class="line"> (4, 2, 3, 1),</span><br><span class="line"> (4, 3, 1, 2),</span><br><span class="line"> (4, 3, 2, 1)]</span><br></pre></td></tr></table></figure></p>
<p>理解迭代的内部机制： 迭代(iteration）就是对可迭代对象（iterables，实现了<strong>iter</strong>()方法）和迭代器（iterators，实现了<strong>next</strong>()方法）的一个操作过程。可迭代对象是任何可返回一个迭代器的对象，迭代器是应用在迭代对象中迭代的对象，换一种方式说的话就是：iterable对象的<strong>iter</strong>()方法可以返回iterator对象，iterator通过调用next()方法获取其中的每一个值(译者注)，读者可以结合Java API中的 Iterable接口和Iterator接口进行类比。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程开发/">编程开发</a>►<a class="article-category-link" href="/categories/编程开发/Python/">Python</a>
</div>


</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/01/01/Python itertools模块详解/" data-title="Python itertools模块详解 | Bug&#39;小虫" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/01/01/Pycharm 增加 Python3的路径/" title="Pycharm 增加 Python3的路径">
  <strong>上一篇：</strong><br/>
  <span>
  Pycharm 增加 Python3的路径</span>
</a>
</div>


<div class="next">
<a href="/2016/01/01/kindeditor4.1.5漏洞/"  title="kindeditor4.1.5漏洞">
 <strong>下一篇：</strong><br/> 
 <span>kindeditor4.1.5漏洞
</span>
</a>
</div>

</nav>

	



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="category-block">
  <h3 class="asidetitle">分类</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/SEO/">SEO</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SEO/反向代理/">反向代理</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/">代码审计</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/php代码审计/">php代码审计</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/">杂七杂八</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/parrot/">parrot</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/rad-linux/">rad linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/windows7/">windows7</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/工具/">工具</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/">渗透测试</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/CMS/">CMS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/XSS/">XSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/上传/">上传</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/其他/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/内网/">内网</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/提取/">提取</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/提权/">提权</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/注入/">注入</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/端口/">端口</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/笔记/">笔记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/资源/">资源</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/">编程开发</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/Python/">Python</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/javascript/">javascript</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/逆向工程/">逆向工程</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/逆向工程/mips/">mips</a><span class="category-list-count">1</span></li></ul></li></ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="https://dillinger.io" target="_blank" title="在线看makedown编译出的效果">makedown</a>
            
          </li>
        
          <li>
            
            	<a href="https://mochazz.github.io" target="_blank" title="一个审计大佬的博客">审计</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.php.cn/course/74.html" target="_blank" title="php官方网站">php</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.51cto.com/simeon" target="_blank" title="一个经常发布资源大佬的博客">资源</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.liaoxuefeng.com" target="_blank" title="学习python的个人博客">python</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.kanxue.com" target="_blank" title="二进制安全学习窝">看雪</a>
            
          </li>
        
          <li>
            
            	<a href="www.secquan.org" target="_blank" title="常混的论坛">圈子</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.2cto.com" target="_blank" title="各种渗透书籍随便挑">红黑联盟</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.cnblogs.com" target="_blank" title="一个内网大佬的博客">linuxsec</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.runoob.com" target="_blank" title="学习各种编程脚本的好地方">W3C</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.91ri.org" target="_blank" title="内网挺可以">91安全</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.kali.org.cn" target="_blank" title="kali linux">kali linux</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.shiyanlou.com" target="_blank" title="实验楼">实验楼</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Bug`小虫 Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="小虫">小虫</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  <script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":"wanko","bottom":-30,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body>
 </html>
